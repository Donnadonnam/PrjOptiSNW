<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion</title>
  <meta name="description" content="<p>Summarize overall model distributional and inequality statistics from covid-less times.
Statistics, including first check MPC, by marital status, children count, and income groups.
See <a href="https://github.com/FanWangEcon/PrjOptiSNW/blob/master/PrjOptiSNW/stats/snwx_evuvw19_jmky_mpc_allocated_m.m">snwx_evuvw19_jmky_mpc_allocated_m</a> for summarizing function over optimal allocation results.</p>" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>Summarize overall model distributional and inequality statistics from covid-less times.
Statistics, including first check MPC, by marital status, children count, and income groups.
See <a href="https://github.com/FanWangEcon/PrjOptiSNW/blob/master/PrjOptiSNW/stats/snwx_evuvw19_jmky_mpc_allocated_m.m">snwx_evuvw19_jmky_mpc_allocated_m</a> for summarizing function over optimal allocation results.</p>" />
  <meta name="github-repo" content="fanwangecon/PrjOptiSNW" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion" />
  
  <meta name="twitter:description" content="<p>Summarize overall model distributional and inequality statistics from covid-less times.
Statistics, including first check MPC, by marital status, children count, and income groups.
See <a href="https://github.com/FanWangEcon/PrjOptiSNW/blob/master/PrjOptiSNW/stats/snwx_evuvw19_jmky_mpc_allocated_m.m">snwx_evuvw19_jmky_mpc_allocated_m</a> for summarizing function over optimal allocation results.</p>" />
  

<meta name="author" content="Vegard M. Nygård, Bent E. Sørensen, and Fan Wang" />


<meta name="date" content="2021-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="solving-the-dynamic-life-cycle-problem.html"/>
<link rel="next" href="solution-with-unemployment.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-10');
</script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NSW Dynamic Life Cycle and Stimulus Checks Code Companion</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#household-problem-and-distributions"><i class="fa fa-check"></i><b>1.1</b> Household Problem and Distributions</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#flat-script-and-code-package"><i class="fa fa-check"></i><b>1.1.1</b> Flat Script and Code Package</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#dynamic-programming-solution-structure-covidless-world"><i class="fa fa-check"></i><b>1.1.2</b> Dynamic Programming Solution Structure COVIDless World</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#dynamic-programming-solution-structure-during-covid-year"><i class="fa fa-check"></i><b>1.1.3</b> Dynamic Programming Solution Structure during COVID Year</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#values-of-checks-conditional-on-2019-information"><i class="fa fa-check"></i><b>1.2</b> Values of Checks Conditional on 2019 Information</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#expected-outcomes-given-2019-information"><i class="fa fa-check"></i><b>1.2.1</b> Expected Outcomes given 2019 Information</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#dynamic-programming-timing"><i class="fa fa-check"></i><b>1.2.2</b> Dynamic Programming Timing</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#the-stimulus-check-planning-problem"><i class="fa fa-check"></i><b>1.3</b> The Stimulus Check Planning Problem</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#information-planning-problem"><i class="fa fa-check"></i><b>1.3.1</b> 2019 Information Planning Problem</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#allocation-functions"><i class="fa fa-check"></i><b>1.3.2</b> Allocation Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="parameters.html"><a href="parameters.html"><i class="fa fa-check"></i><b>2</b> Parameters</a>
<ul>
<li class="chapter" data-level="2.1" data-path="parameters.html"><a href="parameters.html#model-parameters"><i class="fa fa-check"></i><b>2.1</b> Model Parameters</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="parameters.html"><a href="parameters.html#parameters-used-for-test-simulation"><i class="fa fa-check"></i><b>2.1.1</b> Parameters Used for Test Simulation</a></li>
<li class="chapter" data-level="2.1.2" data-path="parameters.html"><a href="parameters.html#documentation-run-parameters-docdense"><i class="fa fa-check"></i><b>2.1.2</b> Documentation Run Parameters Docdense</a></li>
<li class="chapter" data-level="2.1.3" data-path="parameters.html"><a href="parameters.html#parameters-used-for-paper-simulations"><i class="fa fa-check"></i><b>2.1.3</b> Parameters Used for Paper Simulations</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="parameters.html"><a href="parameters.html#model-controls"><i class="fa fa-check"></i><b>2.2</b> Model Controls</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="parameters.html"><a href="parameters.html#test-snw_mp_controls-defaults"><i class="fa fa-check"></i><b>2.2.1</b> Test SNW_MP_CONTROLS Defaults</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html"><i class="fa fa-check"></i><b>3</b> Solving the Dynamic Life Cycle Problem</a>
<ul>
<li class="chapter" data-level="3.1" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#life-cycle-dynamic-programming-with-marital-status-children-and-savings"><i class="fa fa-check"></i><b>3.1</b> Life Cycle Dynamic Programming with Marital Status, Children and Savings</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#test-snw_vfi_main_bisect_vec-defaults"><i class="fa fa-check"></i><b>3.1.1</b> Test SNW_VFI_MAIN_BISECT_VEC Defaults</a></li>
<li class="chapter" data-level="3.1.2" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#define-parameters"><i class="fa fa-check"></i><b>3.1.2</b> Define Parameters</a></li>
<li class="chapter" data-level="3.1.3" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-savings-and-shocks"><i class="fa fa-check"></i><b>3.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="3.1.4" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-kids-and-marriage-and-age"><i class="fa fa-check"></i><b>3.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="3.1.5" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-education-and-marriage-and-age"><i class="fa fa-check"></i><b>3.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html"><i class="fa fa-check"></i><b>4</b> Alternative Value Function Solution Testing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-looped-minimizer"><i class="fa fa-check"></i><b>4.1</b> Small Test Exact Solution Looped Minimizer</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small"><i class="fa fa-check"></i><b>4.1.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.1.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames"><i class="fa fa-check"></i><b>4.1.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-1"><i class="fa fa-check"></i><b>4.1.3</b> Analyze Savings and Shocks</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-grid-search-solution"><i class="fa fa-check"></i><b>4.2</b> Small Test Grid Search Solution</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main_grid_search-defaults-small"><i class="fa fa-check"></i><b>4.2.1</b> Test SNW_VFI_MAIN_GRID_SEARCH Defaults Small</a></li>
<li class="chapter" data-level="4.2.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-1"><i class="fa fa-check"></i><b>4.2.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.2.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-2"><i class="fa fa-check"></i><b>4.2.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.2.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-1"><i class="fa fa-check"></i><b>4.2.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.2.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-1"><i class="fa fa-check"></i><b>4.2.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-vectorized-bisection"><i class="fa fa-check"></i><b>4.3</b> Small Test Exact Solution Vectorized Bisection</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small-1"><i class="fa fa-check"></i><b>4.3.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.3.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-2"><i class="fa fa-check"></i><b>4.3.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.3.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-3"><i class="fa fa-check"></i><b>4.3.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.3.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-2"><i class="fa fa-check"></i><b>4.3.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.3.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-2"><i class="fa fa-check"></i><b>4.3.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-spousal-shocks"><i class="fa fa-check"></i><b>4.4</b> Small Test Exact Solution Spousal Shocks</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small-2"><i class="fa fa-check"></i><b>4.4.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.4.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-3"><i class="fa fa-check"></i><b>4.4.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.4.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-4"><i class="fa fa-check"></i><b>4.4.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.4.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-3"><i class="fa fa-check"></i><b>4.4.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.4.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-3"><i class="fa fa-check"></i><b>4.4.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html"><i class="fa fa-check"></i><b>5</b> Solution with Unemployment</a>
<ul>
<li class="chapter" data-level="5.1" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#life-cycle-dynamic-programming-under-unemployment-shock"><i class="fa fa-check"></i><b>5.1</b> Life Cycle Dynamic Programming under Unemployment Shock</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#test-snw_vfi_unemp"><i class="fa fa-check"></i><b>5.1.1</b> Test SNW_VFI_UNEMP</a></li>
<li class="chapter" data-level="5.1.2" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#define-parameter-frames"><i class="fa fa-check"></i><b>5.1.2</b> Define Parameter Frames</a></li>
<li class="chapter" data-level="5.1.3" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-savings-and-shocks-5"><i class="fa fa-check"></i><b>5.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="5.1.4" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-kids-and-marriage-and-age-4"><i class="fa fa-check"></i><b>5.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="5.1.5" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-education-and-marriage-and-age-4"><i class="fa fa-check"></i><b>5.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html"><i class="fa fa-check"></i><b>6</b> Solution with First and Second Rounds CARES Stimulus</a>
<ul>
<li class="chapter" data-level="6.1" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#life-cycle-dynamic-programming-under-with-cares-act-stimulus-checks"><i class="fa fa-check"></i><b>6.1</b> Life Cycle Dynamic Programming under with CARES Act Stimulus Checks</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#test-snw_vfi_main_bisec_vec_stimulus"><i class="fa fa-check"></i><b>6.1.1</b> Test SNW_VFI_MAIN_BISEC_VEC_STIMULUS</a></li>
<li class="chapter" data-level="6.1.2" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#define-parameter-frames-1"><i class="fa fa-check"></i><b>6.1.2</b> Define Parameter Frames</a></li>
<li class="chapter" data-level="6.1.3" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-savings-and-shocks-6"><i class="fa fa-check"></i><b>6.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="6.1.4" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-kids-and-marriage-and-age-5"><i class="fa fa-check"></i><b>6.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="6.1.5" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-education-and-marriage-and-age-5"><i class="fa fa-check"></i><b>6.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html"><i class="fa fa-check"></i><b>7</b> Household Life Cycle Distribution</a>
<ul>
<li class="chapter" data-level="7.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-grid-search"><i class="fa fa-check"></i><b>7.1</b> Distribution Grid Search</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main_grid_search-defaults-more-dense"><i class="fa fa-check"></i><b>7.1.1</b> Test SNW_DS_MAIN_GRID_SEARCH Defaults More Dense</a></li>
<li class="chapter" data-level="7.1.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results-more-dense"><i class="fa fa-check"></i><b>7.1.2</b> Show All Info in mp_dsvfi_results More Dense</a></li>
<li class="chapter" data-level="7.1.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#more-dense-param-results-define-frames"><i class="fa fa-check"></i><b>7.1.3</b> More Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="7.1.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-along-age-dimensions"><i class="fa fa-check"></i><b>7.1.4</b> Analyze Probability Mass Along Age Dimensions</a></li>
<li class="chapter" data-level="7.1.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-asset-and-shock-dimensions"><i class="fa fa-check"></i><b>7.1.5</b> Analyze Probability Mass Asset and Shock Dimensions</a></li>
<li class="chapter" data-level="7.1.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#probability-statistics-a-c-and-v-conditional-on-ages"><i class="fa fa-check"></i><b>7.1.6</b> Probability Statistics A, C and V Conditional on Ages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-exact-savings-choices"><i class="fa fa-check"></i><b>7.2</b> Distribution Exact Savings Choices</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main-defaults"><i class="fa fa-check"></i><b>7.2.1</b> Test SNW_DS_MAIN Defaults</a></li>
<li class="chapter" data-level="7.2.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results-more-dense-1"><i class="fa fa-check"></i><b>7.2.2</b> Show All Info in mp_dsvfi_results More Dense</a></li>
<li class="chapter" data-level="7.2.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#more-dense-param-results-define-frames-1"><i class="fa fa-check"></i><b>7.2.3</b> More Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="7.2.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-along-age-dimensions-1"><i class="fa fa-check"></i><b>7.2.4</b> Analyze Probability Mass Along Age Dimensions</a></li>
<li class="chapter" data-level="7.2.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-asset-and-shock-dimensions-1"><i class="fa fa-check"></i><b>7.2.5</b> Analyze Probability Mass Asset and Shock Dimensions</a></li>
<li class="chapter" data-level="7.2.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#probability-statistics-a-c-and-v-conditional-on-ages-1"><i class="fa fa-check"></i><b>7.2.6</b> Probability Statistics A, C and V Conditional on Ages</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-exact-savings-choices-vectorized"><i class="fa fa-check"></i><b>7.3</b> Distribution Exact Savings Choices Vectorized</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main_vec"><i class="fa fa-check"></i><b>7.3.1</b> Test SNW_DS_MAIN_VEC</a></li>
<li class="chapter" data-level="7.3.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results"><i class="fa fa-check"></i><b>7.3.2</b> Show All Info in mp_dsvfi_results</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-with-one-period-policy-shift"><i class="fa fa-check"></i><b>7.4</b> Distribution with One Period Policy Shift</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#one-period-deviation-from-steady-state-given-alternative-policy-function"><i class="fa fa-check"></i><b>7.4.1</b> One-period Deviation from Steady-State given Alternative Policy Function</a></li>
<li class="chapter" data-level="7.4.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-steady-state-policy-and-value-functions"><i class="fa fa-check"></i><b>7.4.2</b> Solve for "Steady-State" Policy and Value Functions</a></li>
<li class="chapter" data-level="7.4.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-steady-state-distribution"><i class="fa fa-check"></i><b>7.4.3</b> Solve for "Steady-State" Distribution</a></li>
<li class="chapter" data-level="7.4.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-policy-function-under-trump-stimulus"><i class="fa fa-check"></i><b>7.4.4</b> Solve for Policy Function Under Trump Stimulus</a></li>
<li class="chapter" data-level="7.4.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-updated-distribution-given-trump-stimulus"><i class="fa fa-check"></i><b>7.4.5</b> Solve for Updated Distribution given Trump Stimulus</a></li>
<li class="chapter" data-level="7.4.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#debug-check-snw_ds_main_vec-with-steady-state-policies"><i class="fa fa-check"></i><b>7.4.6</b> Debug Check, SNW_DS_MAIN_VEC with Steady State Policies</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="value-of-each-check.html"><a href="value-of-each-check.html"><i class="fa fa-check"></i><b>8</b> Value of Each Check</a>
<ul>
<li class="chapter" data-level="8.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#v-and-c-without-unemployment"><i class="fa fa-check"></i><b>8.1</b> 2020 V and C without Unemployment</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#test-snw_a4chk_wrk_bisec_vec-defaults-dense"><i class="fa fa-check"></i><b>8.1.1</b> Test SNW_A4CHK_WRK_BISEC_VEC Defaults Dense</a></li>
<li class="chapter" data-level="8.1.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#dense-param-results-define-frames"><i class="fa fa-check"></i><b>8.1.2</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="8.1.3" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-difference-in-v-and-c-with-check"><i class="fa fa-check"></i><b>8.1.3</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="8.1.4" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-kids-and-marriage-and-age-6"><i class="fa fa-check"></i><b>8.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="8.1.5" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-education-and-marriage"><i class="fa fa-check"></i><b>8.1.5</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#v-and-c-with-unemployment"><i class="fa fa-check"></i><b>8.2</b> 2020 V and C with Unemployment</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#test-snw_a4chk_unemp_bisec_vec-defaults"><i class="fa fa-check"></i><b>8.2.1</b> Test SNW_A4CHK_UNEMP_BISEC_VEC Defaults</a></li>
<li class="chapter" data-level="8.2.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#dense-param-results-define-frames-1"><i class="fa fa-check"></i><b>8.2.2</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="8.2.3" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-difference-in-v-and-c-with-check-1"><i class="fa fa-check"></i><b>8.2.3</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="8.2.4" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-kids-and-marriage-and-age-7"><i class="fa fa-check"></i><b>8.2.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="8.2.5" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-education-and-marriage-1"><i class="fa fa-check"></i><b>8.2.5</b> Analyze Education and Marriage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html"><i class="fa fa-check"></i><b>9</b> 2020 Outcomes Full State Space with Savings, Shocks and Education</a>
<ul>
<li class="chapter" data-level="9.1" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#full-states-ev-and-ec-of-one-check"><i class="fa fa-check"></i><b>9.1</b> 2020 Full States EV and EC of One Check</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#test-snw_evuvw20_jaeemk-defaults"><i class="fa fa-check"></i><b>9.1.1</b> Test SNW_EVUVW20_JAEEMK Defaults</a></li>
<li class="chapter" data-level="9.1.2" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#precompute"><i class="fa fa-check"></i><b>9.1.2</b> Precompute</a></li>
<li class="chapter" data-level="9.1.3" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#solve-for-2020-evuvw-with-0-and-2-checks"><i class="fa fa-check"></i><b>9.1.3</b> Solve for 2020 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.1.4" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#param-results-define-frames"><i class="fa fa-check"></i><b>9.1.4</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.1.5" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-difference-in-v-and-c-with-check-2"><i class="fa fa-check"></i><b>9.1.5</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.1.6" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education"><i class="fa fa-check"></i><b>9.1.6</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.1.7" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education"><i class="fa fa-check"></i><b>9.1.7</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.1.8" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education"><i class="fa fa-check"></i><b>9.1.8</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.1.9" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-kids-and-marriage-and-age-8"><i class="fa fa-check"></i><b>9.1.9</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.1.10" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-education-and-marriage-2"><i class="fa fa-check"></i><b>9.1.10</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#full-states-ev-and-ec-of-one-check-1"><i class="fa fa-check"></i><b>9.2</b> 2019 Full States EV and EC of One Check</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#test-snw_evuvw19_jaeemk-defaults"><i class="fa fa-check"></i><b>9.2.1</b> Test SNW_EVUVW19_JAEEMK Defaults</a></li>
<li class="chapter" data-level="9.2.2" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#solve-for-2019-evuvw-with-0-and-2-checks"><i class="fa fa-check"></i><b>9.2.2</b> Solve for 2019 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.2.3" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#param-results-define-frames-1"><i class="fa fa-check"></i><b>9.2.3</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.2.4" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-difference-in-v-and-c-with-check-3"><i class="fa fa-check"></i><b>9.2.4</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.2.5" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-1"><i class="fa fa-check"></i><b>9.2.5</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.2.6" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education-1"><i class="fa fa-check"></i><b>9.2.6</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.2.7" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education-1"><i class="fa fa-check"></i><b>9.2.7</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.2.8" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-kids-and-marriage-and-age-9"><i class="fa fa-check"></i><b>9.2.8</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.2.9" data-path="outcomes-full-state-space-with-savings-shocks-and-education.html"><a href="outcomes-full-state-space-with-savings-shocks-and-education.html#analyze-education-and-marriage-3"><i class="fa fa-check"></i><b>9.2.9</b> Analyze Education and Marriage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html"><i class="fa fa-check"></i><b>10</b> 2019 Expectations Given Income, Age, Kids and Marital Status</a>
<ul>
<li class="chapter" data-level="10.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#age-income-kids-marry-ev-and-ec-of-one-check"><i class="fa fa-check"></i><b>10.1</b> 2019 Age, Income, Kids, Marry EV and EC of One Check</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#test-snw_evuvw19_jmky-defaults-dense"><i class="fa fa-check"></i><b>10.1.1</b> Test SNW_EVUVW19_JMKY Defaults Dense</a></li>
<li class="chapter" data-level="10.1.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#solve-vfi-and-distributon"><i class="fa fa-check"></i><b>10.1.2</b> Solve VFI and Distributon</a></li>
<li class="chapter" data-level="10.1.3" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#pre-compute-matrixes-and-ymky-mass"><i class="fa fa-check"></i><b>10.1.3</b> Pre-Compute Matrixes and YMKY Mass</a></li>
<li class="chapter" data-level="10.1.4" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#solve-for-2019-evuvw-with-0-and-2-checks-1"><i class="fa fa-check"></i><b>10.1.4</b> Solve for 2019 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="10.1.5" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#dense-param-results-define-frames-2"><i class="fa fa-check"></i><b>10.1.5</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="10.1.6" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-2"><i class="fa fa-check"></i><b>10.1.6</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#age-income-kids-marry-ev-and-ec-all-checks"><i class="fa fa-check"></i><b>10.2</b> 2019 Age, Income, Kids, Marry EV and EC All Checks</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#test-snw_evuvw19_jmky_allchecks-parameters"><i class="fa fa-check"></i><b>10.2.1</b> Test SNW_EVUVW19_JMKY_ALLCHECKS Parameters</a></li>
<li class="chapter" data-level="10.2.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#snw_evuvw19_jmky_allchecks-low-storage-invoke"><i class="fa fa-check"></i><b>10.2.2</b> SNW_EVUVW19_JMKY_ALLCHECKS Low Storage Invoke</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="taxes.html"><a href="taxes.html"><i class="fa fa-check"></i><b>11</b> Taxes</a>
<ul>
<li class="chapter" data-level="11.1" data-path="taxes.html"><a href="taxes.html#compute-for-equilibrium-tax"><i class="fa fa-check"></i><b>11.1</b> Compute for Equilibrium Tax</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="taxes.html"><a href="taxes.html#parameter-controls"><i class="fa fa-check"></i><b>11.1.1</b> Parameter Controls</a></li>
<li class="chapter" data-level="11.1.2" data-path="taxes.html"><a href="taxes.html#solve-for-new-tax-rate"><i class="fa fa-check"></i><b>11.1.2</b> Solve for New Tax Rate</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="taxes.html"><a href="taxes.html#existing-stimulus-as-a-function-of-income-and-family-status"><i class="fa fa-check"></i><b>11.2</b> Existing Stimulus as a Function of Income and Family Status</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="taxes.html"><a href="taxes.html#trump-stimulus-checks-for-unmarried-households"><i class="fa fa-check"></i><b>11.2.1</b> Trump Stimulus Checks for Unmarried Households</a></li>
<li class="chapter" data-level="11.2.2" data-path="taxes.html"><a href="taxes.html#trump-stimulus-checks-for-arried-households"><i class="fa fa-check"></i><b>11.2.2</b> Trump Stimulus Checks for arried Households</a></li>
<li class="chapter" data-level="11.2.3" data-path="taxes.html"><a href="taxes.html#biden-stimulus-checks-for-unmarried-and-married-households"><i class="fa fa-check"></i><b>11.2.3</b> Biden Stimulus Checks for Unmarried and Married Households</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="taxes.html"><a href="taxes.html#existing-stimulus-as-a-function-of-income-and-family-status-1"><i class="fa fa-check"></i><b>11.3</b> Existing Stimulus as a Function of Income and Family Status</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="taxes.html"><a href="taxes.html#biden-stimulus-checks-for-unmarried-households"><i class="fa fa-check"></i><b>11.3.1</b> Biden Stimulus Checks for Unmarried Households</a></li>
<li class="chapter" data-level="11.3.2" data-path="taxes.html"><a href="taxes.html#biden-stimulus-checks-for-married-households"><i class="fa fa-check"></i><b>11.3.2</b> Biden Stimulus Checks for Married Households</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="calibration.html"><a href="calibration.html"><i class="fa fa-check"></i><b>12</b> Calibration</a>
<ul>
<li class="chapter" data-level="12.1" data-path="calibration.html"><a href="calibration.html#model-calibration"><i class="fa fa-check"></i><b>12.1</b> Model Calibration</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="calibration.html"><a href="calibration.html#calibrate-parameter-controls-for-snw-functions"><i class="fa fa-check"></i><b>12.1.1</b> Calibrate Parameter Controls for SNW Functions</a></li>
<li class="chapter" data-level="12.1.2" data-path="calibration.html"><a href="calibration.html#calibrate-routine"><i class="fa fa-check"></i><b>12.1.2</b> Calibrate Routine</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="calibration.html"><a href="calibration.html#model-lockdown-calibration"><i class="fa fa-check"></i><b>12.2</b> Model Lockdown Calibration</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="calibration.html"><a href="calibration.html#lock-down-impact-on-consumption"><i class="fa fa-check"></i><b>12.2.1</b> Lock Down Impact on Consumption</a></li>
<li class="chapter" data-level="12.2.2" data-path="calibration.html"><a href="calibration.html#graphical-illustraiton-for-gamma2-docdense-and-gamma1-dense"><i class="fa fa-check"></i><b>12.2.2</b> Graphical Illustraiton for Gamma=2 (docdense) and Gamma=1 (dense)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>13</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="13.1" data-path="summary-statistics.html"><a href="summary-statistics.html#full-states-mpc-and-distributional-statistics-by-marital-kids-and-income-groups."><i class="fa fa-check"></i><b>13.1</b> 2019 Full States MPC and Distributional Statistics by Marital, Kids, and Income Groups.</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="summary-statistics.html"><a href="summary-statistics.html#test-snw_evuvw19_jaeemk-defaults-dense"><i class="fa fa-check"></i><b>13.1.1</b> Test SNW_EVUVW19_JAEEMK Defaults Dense</a></li>
<li class="chapter" data-level="13.1.2" data-path="summary-statistics.html"><a href="summary-statistics.html#solve-for-2019-evuvw-with-0-and-1-checks"><i class="fa fa-check"></i><b>13.1.2</b> Solve for 2019 Evuvw With 0 and 1 Checks</a></li>
<li class="chapter" data-level="13.1.3" data-path="summary-statistics.html"><a href="summary-statistics.html#additional-variables"><i class="fa fa-check"></i><b>13.1.3</b> Additional Variables</a></li>
<li class="chapter" data-level="13.1.4" data-path="summary-statistics.html"><a href="summary-statistics.html#adjust-to-probability-mass-function"><i class="fa fa-check"></i><b>13.1.4</b> Adjust to Probability Mass Function</a></li>
<li class="chapter" data-level="13.1.5" data-path="summary-statistics.html"><a href="summary-statistics.html#age-bounds"><i class="fa fa-check"></i><b>13.1.5</b> Age Bounds</a></li>
<li class="chapter" data-level="13.1.6" data-path="summary-statistics.html"><a href="summary-statistics.html#scale-statistics-to-thousands-of-dollars"><i class="fa fa-check"></i><b>13.1.6</b> Scale Statistics to Thousands of Dollars</a></li>
<li class="chapter" data-level="13.1.7" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-overall-all-ages"><i class="fa fa-check"></i><b>13.1.7</b> Distributional Statistics Overall All Ages</a></li>
<li class="chapter" data-level="13.1.8" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-overall-18-to-64"><i class="fa fa-check"></i><b>13.1.8</b> Distributional Statistics Overall 18 to 64</a></li>
<li class="chapter" data-level="13.1.9" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-kids-count"><i class="fa fa-check"></i><b>13.1.9</b> Distributional Statistics By Kids Count</a></li>
<li class="chapter" data-level="13.1.10" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-marital-status-and-kids-count"><i class="fa fa-check"></i><b>13.1.10</b> Distributional Statistics By Marital Status and Kids Count</a></li>
<li class="chapter" data-level="13.1.11" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-marital-status-kids-count-and-income-bins"><i class="fa fa-check"></i><b>13.1.11</b> Distributional Statistics By Marital Status, Kids Count and Income Bins</a></li>
<li class="chapter" data-level="13.1.12" data-path="summary-statistics.html"><a href="summary-statistics.html#store-aggregate-to-file"><i class="fa fa-check"></i><b>13.1.12</b> Store Aggregate To File</a></li>
<li class="chapter" data-level="13.1.13" data-path="summary-statistics.html"><a href="summary-statistics.html#store-key-stats-to-compare-to-key-us-distributional-statistics"><i class="fa fa-check"></i><b>13.1.13</b> Store Key Stats to Compare to Key US Distributional Statistics</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#introduction-links"><i class="fa fa-check"></i><b>A.1</b> Introduction links</a></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#parameters-links"><i class="fa fa-check"></i><b>A.2</b> Parameters links</a></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#solving-the-dynamic-life-cycle-problem-links"><i class="fa fa-check"></i><b>A.3</b> Solving the Dynamic Life Cycle Problem links</a></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#alternative-value-function-solution-testing-links"><i class="fa fa-check"></i><b>A.4</b> Alternative Value Function Solution Testing links</a></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#solution-with-unemployment-links"><i class="fa fa-check"></i><b>A.5</b> Solution with Unemployment links</a></li>
<li class="chapter" data-level="A.6" data-path="index-and-code-links.html"><a href="index-and-code-links.html#solution-with-first-and-second-rounds-cares-stimulus-links"><i class="fa fa-check"></i><b>A.6</b> Solution with First and Second Rounds CARES Stimulus links</a></li>
<li class="chapter" data-level="A.7" data-path="index-and-code-links.html"><a href="index-and-code-links.html#household-life-cycle-distribution-links"><i class="fa fa-check"></i><b>A.7</b> Household Life Cycle Distribution links</a></li>
<li class="chapter" data-level="A.8" data-path="index-and-code-links.html"><a href="index-and-code-links.html#value-of-each-check-links"><i class="fa fa-check"></i><b>A.8</b> Value of Each Check links</a></li>
<li class="chapter" data-level="A.9" data-path="index-and-code-links.html"><a href="index-and-code-links.html#outcomes-full-state-space-with-savings-shocks-and-education-links"><i class="fa fa-check"></i><b>A.9</b> Outcomes Full State Space with Savings, Shocks and Education links</a></li>
<li class="chapter" data-level="A.10" data-path="index-and-code-links.html"><a href="index-and-code-links.html#expectations-given-income-age-kids-and-marital-status-links"><i class="fa fa-check"></i><b>A.10</b> Expectations Given Income, Age, Kids and Marital Status links</a></li>
<li class="chapter" data-level="A.11" data-path="index-and-code-links.html"><a href="index-and-code-links.html#taxes-links"><i class="fa fa-check"></i><b>A.11</b> Taxes links</a></li>
<li class="chapter" data-level="A.12" data-path="index-and-code-links.html"><a href="index-and-code-links.html#calibration-links"><i class="fa fa-check"></i><b>A.12</b> Calibration links</a></li>
<li class="chapter" data-level="A.13" data-path="index-and-code-links.html"><a href="index-and-code-links.html#summary-statistics-links"><i class="fa fa-check"></i><b>A.13</b> Summary Statistics links</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/PrjOptiSNW/bookdown/index.html" target="blank">PrjOptiSNW Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NSW Dynamic Life Cycle and Stimulus Checks Code Companion</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="alternative-value-function-solution-testing" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Alternative Value Function Solution Testing</h1>

<div id="small-test-exact-solution-looped-minimizer" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Small Test Exact Solution Looped Minimizer</h2>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/blob/master/PrjOptiSNW/svalpol/snw_vfi_main.m"><strong>snw_vfi_main</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function fully iteratively using matlab minimizer.
Small Solution Analysis.This produces the same result as
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a><strong>,</strong>
except slower. The purpose of this function is to confirm that the
results from
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
is correct.</p>
<div id="test-snw_vfi_main-defaults-small" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<p>Call the function with defaults parameters.</p>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main(mp_param);

SNW_VFI_MAIN: Finished Age Group:18 of 18
SNW_VFI_MAIN: Finished Age Group:17 of 18
SNW_VFI_MAIN: Finished Age Group:16 of 18
SNW_VFI_MAIN: Finished Age Group:15 of 18
SNW_VFI_MAIN: Finished Age Group:14 of 18
SNW_VFI_MAIN: Finished Age Group:13 of 18
SNW_VFI_MAIN: Finished Age Group:12 of 18
SNW_VFI_MAIN: Finished Age Group:11 of 18
SNW_VFI_MAIN: Finished Age Group:10 of 18
SNW_VFI_MAIN: Finished Age Group:9 of 18
SNW_VFI_MAIN: Finished Age Group:8 of 18
SNW_VFI_MAIN: Finished Age Group:7 of 18
SNW_VFI_MAIN: Finished Age Group:6 of 18
SNW_VFI_MAIN: Finished Age Group:5 of 18
SNW_VFI_MAIN: Finished Age Group:4 of 18
SNW_VFI_MAIN: Finished Age Group:3 of 18
SNW_VFI_MAIN: Finished Age Group:2 of 18
SNW_VFI_MAIN: Finished Age Group:1 of 18
Elapsed time is 307.635195 seconds.
Completed SNW_VFI_MAIN;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base</code></pre>
</div>
<div id="small-param-results-define-frames" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Small Param Results Define Frames</h3>
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;eta&#39;, 1:length(eta_H_grid)});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-1" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Analyze Savings and Shocks</h3>
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
<p>Tabulate value and policies along savings and shocks:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0      -17.393       -9.1596       -4.4164       -1.5922      -0.05106 
      2      0.0097656      -16.967        -9.023       -4.3405       -1.5316     0.0054259 
      3       0.078125      -14.925       -8.2554       -3.9177       -1.2071        0.3028 
      4        0.26367      -11.699       -6.8681       -3.1808       -0.6913       0.75178 
      5          0.625      -8.2751        -5.167       -2.2786      -0.13883        1.1911 
      6         1.2207      -5.3024       -3.4437       -1.3431       0.38361        1.5638 
      7         2.1094      -2.9816       -1.9066      -0.47798       0.86412        1.8672 
      8         3.3496      -1.2609      -0.64407       0.28611        1.3001        2.1163 
      9              5    -0.012545       0.34403        0.9369        1.6782        2.3266 
     10         7.1191       0.8875         1.097        1.4725        1.9981        2.5086 
     11         9.7656       1.5392         1.665        1.9037        2.2701        2.6684 
     12         12.998       2.0158        2.0932        2.2465        2.5004        2.8071 
     13         16.875       2.3684        2.4172        2.5172        2.6933        2.9263 
     14         21.455       2.6328        2.6644        2.7307        2.8535        3.0288 
     15         26.797       2.8339        2.8549        2.8997         2.986        3.1174 
     16         32.959        2.989        3.0032         3.034        3.0954        3.1939 
     17             40       3.1102          3.12        3.1416        3.1857        3.2598 
     18         47.979       3.2059        3.2128        3.2282        3.2603        3.3164 
     19         56.953       3.2825        3.2875        3.2986        3.3222        3.3649 
     20         66.982       3.3443         3.348        3.3562        3.3738        3.4064 
     21         78.125       3.3948        3.3975        3.4036        3.4169        3.4421 
     22         90.439       3.4364        3.4384         3.443        3.4532        3.4728 
     23         103.98       3.4709        3.4724         3.476        3.4838        3.4991 
     24         118.82       3.4998         3.501        3.5037        3.5098        3.5219 
     25            135       3.5241        3.5251        3.5272        3.5319        3.5416 

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0    2.7521e-05    0.0021998      0.046507      0.23828       0.88717  
      2      0.0097656    0.00054716    0.0036592      0.049526      0.24213       0.89277  
      3       0.078125      0.021674     0.027305      0.079508      0.27478       0.93352  
      4        0.26367       0.13129      0.14249       0.19452      0.38205        1.0523  
      5          0.625       0.38716      0.40422       0.44789      0.63888        1.3005  
      6         1.2207       0.83381      0.85545       0.90674       1.0839         1.735  
      7         2.1094        1.5206       1.5442        1.6064       1.7452        2.3859  
      8         3.3496         2.477       2.5013        2.5629       2.6789        3.3301  
      9              5        3.7541       3.7788        3.8405       3.9859        4.5828  
     10         7.1191         5.416       5.4412        5.5038       5.6835        6.1821  
     11         9.7656        7.4668       7.4912        7.5553       7.7413         8.177  
     12         12.998        9.9008       9.9212        9.9832       10.174        10.619  
     13         16.875        12.918        12.94        12.995       13.186        13.709  
     14         21.455        16.519       16.538        16.594       16.772        17.365  
     15         26.797         20.59       20.608        20.657       20.825        21.451  
     16         32.959        25.295       25.313        25.358       25.513        26.139  
     17             40        30.657        30.68        30.732       30.877        31.477  
     18         47.979        36.752       36.772        36.831        36.99        37.553  
     19         56.953        43.764       43.786        43.839       44.003        44.551  
     20         66.982        51.595       51.618        51.678        51.84        52.393  
     21         78.125        59.943       59.966        60.026       60.198        60.756  
     22         90.439        69.256        69.28        69.342       69.517        70.086  
     23         103.98        79.744       79.765        79.824       79.998        80.576  
     24         118.82        91.106        91.13        91.192       91.358        91.933  
     25            135        103.46       103.48        103.54       103.71        104.28  

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0      0.3104          0.44       0.69882        1.2297        2.3502  
      2      0.0097656      0.3214       0.45001       0.70723        1.2373         2.356  
      3       0.078125      0.3809       0.50664       0.75721        1.2844        2.3949  
      4        0.26367     0.48992       0.60921       0.85919        1.3936        2.4924  
      5          0.625     0.65904       0.77109        1.0281        1.5583        2.6654  
      6         1.2207     0.91142        1.0172        1.2649        1.8076        2.9247  
      7         2.1094      1.2649        1.3671        1.6019        2.1815        3.3081  
      8         3.3496      1.7572        1.8573        2.0907        2.6915        3.8066  
      9              5      2.4045         2.503        2.7347        3.3043        4.4728  
     10         7.1191      3.2104        3.3074         3.537        4.0708        5.3364  
     11         9.7656      4.2385        4.3358        4.5627        5.0889        6.4164  
     12         12.998      5.5627        5.6635        5.8917        6.4121        7.7296  
     13         16.875      7.0504        7.1499        7.3847         7.904        9.1419  
     14         21.455      8.7708        8.8721        9.1059        9.6366        10.804  
     15         26.797      10.904        11.007        11.246        11.787        12.921  
     16         32.959      13.355        13.457          13.7        14.254        15.388  
     17             40      16.168        16.266        16.502        17.066        18.225  
     18         47.979      19.337        19.437        19.666        20.215        21.411  
     19         56.953      22.744        22.843        23.078        23.621        24.831  
     20         66.982      26.557        26.654        26.882        27.427        28.632  
     21         78.125      31.144        31.241        31.469        32.005        33.205  
     22         90.439      36.126        36.222        36.449        36.981        38.169  
     23         103.98      41.361         41.46        41.689        42.223        43.402  
     24         118.82      47.219        47.315        47.541        48.083        49.265  
     25            135      53.648        53.747        53.978        54.513        55.702  </code></pre>

</div>
</div>
<div id="small-test-grid-search-solution" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Small Test Grid Search Solution</h2>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_grid_search.m"><strong>snw_vfi_main_grid_search</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function using grid search. Small Solution Analysis.
Small Solution Analysis, husband 5 shocks, wife 1 shocks.</p>
<div id="test-snw_vfi_main_grid_search-defaults-small" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Test SNW_VFI_MAIN_GRID_SEARCH Defaults Small</h3>
<p>Call the function with defaults parameters.</p>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_grid_search(mp_param);

SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:18 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:17 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:16 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:15 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:14 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:13 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:12 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:11 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:10 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:9 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:8 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:7 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:6 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:5 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:4 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:3 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:2 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:1 of 18
Elapsed time is 3.829158 seconds.
Completed SNW_VFI_MAIN_GRID_SEARCH;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base</code></pre>
</div>
<div id="small-param-results-define-frames-1" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Small Param Results Define Frames</h3>
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;Hshock&#39;, eta_H_grid});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-2" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Analyze Savings and Shocks</h3>
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
<p>Tabulate value and policies along savings and shocks:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          -17.394                  -9.166             -4.4582             -1.6255               -0.065396    
      2      0.0097656          -16.968                 -9.0297              -4.383             -1.5651              -0.0088243    
      3       0.078125          -15.017                 -8.2656             -3.9672             -1.2425                 0.28896    
      4        0.26367          -11.958                 -6.9235             -3.2427            -0.73314                   0.737    
      5          0.625           -8.614                 -5.2917             -2.3144            -0.18776                  1.1734    
      6         1.2207          -5.6438                 -3.6124             -1.3711             0.33039                  1.5469    
      7         2.1094          -3.2727                 -2.0767            -0.51202              0.8309                  1.8503    
      8         3.3496          -1.4899                -0.79383             0.23904              1.2876                  2.0971    
      9              5         -0.18672                 0.21807             0.87882              1.6686                  2.3069    
     10         7.1191          0.75696                 0.99324              1.4131              1.9855                   2.495    
     11         9.7656           1.4411                  1.5836              1.8494              2.2522                  2.6605    
     12         12.998           1.9409                  2.0281              2.1992              2.4786                  2.8015    
     13         16.875           2.3126                  2.3665              2.4779              2.6713                  2.9207    
     14         21.455           2.5903                  2.6255              2.6981              2.8331                  3.0223    
     15         26.797           2.8009                  2.8241              2.8737               2.968                  3.1101    
     16         32.959           2.9638                  2.9792              3.0129              3.0797                  3.1864    
     17             40           3.0907                  3.1014              3.1247              3.1725                  3.2526    
     18         47.979           3.1906                  3.1981              3.2147              3.2492                  3.3098    
     19         56.953           3.2703                  3.2756              3.2877              3.3131                   3.359    
     20         66.982           3.3347                  3.3386              3.3473              3.3663                  3.4013    
     21         78.125           3.3872                    3.39              3.3965              3.4106                  3.4376    
     22         90.439           3.4302                  3.4324              3.4373               3.448                  3.4688    
     23         103.98           3.4659                  3.4675              3.4712              3.4795                  3.4958    
     24         118.82           3.4957                   3.497              3.4998              3.5062                   3.519    
     25            135           3.5208                  3.5218               3.524               3.529                  3.5391    

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0               1                  1.1111              1.5694              2.5926                  4.162      
      2      0.0097656          1.0463                  1.1852              1.6343              2.6065                 4.1667      
      3       0.078125          1.7917                  1.9815              2.1806              2.8519                 4.3009      
      4        0.26367          2.9306                  3.0231              3.2083              3.6065                 4.7222      
      5          0.625          4.0509                  4.1296              4.2454              4.5185                 5.3889      
      6         1.2207          5.1296                  5.2176              5.2639              5.3889                 6.0139      
      7         2.1094          6.1065                  6.1852              6.2361              6.2454                 6.7639      
      8         3.3496          7.0324                  7.0648              7.1574              7.1481                 7.5463      
      9              5          7.9259                   7.963               8.037              8.0648                 8.3241      
     10         7.1191          8.8519                   8.875              8.9306              9.0093                 9.0926      
     11         9.7656          9.7824                  9.7963              9.8472              9.9259                 9.9444      
     12         12.998          10.593                  10.625              10.639              10.722                 10.782      
     13         16.875          11.481                  11.491              11.537              11.597                 11.685      
     14         21.455          12.407                  12.407              12.426              12.486                 12.593      
     15         26.797          13.282                  13.296              13.306              13.356                 13.463      
     16         32.959          14.116                   14.12              14.153               14.19                 14.287      
     17             40          14.981                  14.981              14.991              15.032                  15.12      
     18         47.979           15.88                   15.88              15.884              15.912                 15.995      
     19         56.953           16.75                  16.769              16.782              16.796                 16.866      
     20         66.982          17.681                  17.685              17.699              17.722                 17.787      
     21         78.125          18.495                    18.5              18.509              18.551                 18.602      
     22         90.439          19.338                  19.338              19.347               19.37                 19.449      
     23         103.98           20.25                  20.264              20.269              20.278                 20.347      
     24         118.82          21.097                  21.097               21.13              21.144                 21.194      
     25            135          21.963                  21.968              21.977              21.995                 22.046      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          0.31042                0.44057              0.71427             1.2574                  2.314      
      2      0.0097656           0.3215                 0.4505              0.72262             1.2662                 2.3245      
      3       0.078125          0.38861                0.50889               0.7788              1.329                  2.382      
      4        0.26367          0.51067                0.62506              0.88538             1.4326                  2.524      
      5          0.625            0.686                0.78667               1.0455             1.6042                 2.6816      
      6         1.2207           0.9128                0.98784               1.2592             1.8667                 3.0034      
      7         2.1094           1.2523                 1.3082               1.5599             2.2603                 3.3629      
      8         3.3496           1.7189                 1.8031               1.9833             2.7116                 3.8228      
      9              5           2.3724                 2.4345               2.6057             3.2749                  4.493      
     10         7.1191           3.1536                 3.2269               3.4012              3.948                 5.4917      
     11         9.7656           4.0911                  4.176               4.3322             4.8361                 6.5503      
     12         12.998           5.4598                 5.4763               5.7216             6.1634                  7.731      
     13         16.875           6.9683                 7.0533               7.1634             7.6403                 9.0606      
     14         21.455           8.5994                 8.7201               8.9245             9.3583                 10.631      
     15         26.797           10.632                 10.678               10.918             11.355                 12.546      
     16         32.959            13.22                 13.312               13.401             13.881                 15.042      
     17             40           16.041                 16.161               16.385             16.799                 17.939      
     18         47.979           18.978                 19.099                19.35             19.836                  20.93      
     19         56.953            22.58                 22.534               22.697             23.281                 24.416      
     20         66.982           26.096                 26.175               26.329             26.804                 27.912      
     21         78.125            30.85                 30.924               31.108             31.367                 32.563      
     22         90.439           35.936                 36.056               36.235             36.674                 37.484      
     23         103.98           40.993                 40.925               41.151             41.738                 42.578      
     24         118.82           47.079                 47.199               47.025             47.532                 48.546      
     25            135             53.5                 53.545               53.689             54.103                 55.061      </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_0.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_1.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_2.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_3.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_4.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_5.png" width="500" /></p>
</div>
<div id="analyze-kids-and-marriage-and-age-1" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Analyze Kids and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0         1.4134         1.6987         1.8877         1.9428         1.9141         1.8282         1.7044         1.5542         1.3846          1.205         1.0192        0.79718        0.18106        0.25076         0.28592        0.30412       0.32812         0.35812  
      2       2        0       -0.11224        0.38086        0.75969        0.96426         1.0617         1.0785          1.039        0.95835        0.84782        0.72004        0.58915        0.39502       -0.29316        -0.1706       -0.086633      -0.024656      0.031664        0.092238  
      3       3        0       -0.88391       -0.40356        -0.0148        0.20487        0.31925        0.35976        0.34926        0.30262        0.23134        0.14695       0.056502        -0.1061       -0.89561       -0.67785        -0.49997       -0.35897      -0.23998        -0.11178  
      4       1        1         1.9721          2.188         2.3283         2.3713         2.3479         2.2743          2.163         2.0202         1.8482         1.6533         1.4338         1.1707        0.72057        0.67442         0.61679        0.57182       0.54444         0.52849  
      5       2        1        0.97335         1.2928         1.5422         1.6825         1.7486         1.7527         1.7083         1.6235         1.5028         1.3522         1.1694        0.93607        0.49951        0.48475         0.45637        0.43546        0.4241         0.42377  
      6       3        1        0.52474        0.81914         1.0571         1.1945         1.2619          1.277         1.2525         1.1949         1.1082        0.99508        0.85017        0.65587        0.24461        0.27502         0.28914         0.3038       0.31832         0.34526  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        12.948          12.92         13.052         13.152          13.22         13.264          13.26          13.14         13.028         12.936         12.824           12.7          11.76          11.48          10.98          10.2           8.98             1      
      2       2        0        12.924          12.88         13.004         13.092         13.156           13.1         12.992         12.904         12.816         12.748         12.696         12.512          11.68          11.32          10.78          9.92           8.76             1      
      3       3        0        12.856         12.848         12.972          13.08         13.104          13.02         12.932         12.852         12.792         12.708         12.684         12.492          11.64          11.32          10.78          9.98            8.8             1      
      4       1        1         12.86         12.856         12.972         13.072         13.132         13.184         13.152         13.044          12.94         12.824         12.768         12.696          11.76           11.4          10.86            10            8.8             1      
      5       2        1        12.876          12.82         12.956         13.028         13.096         13.124         13.008         12.884         12.764          12.68         12.664         12.552          11.64          11.32          10.62           9.9           8.62             1      
      6       3        1          12.8         12.784         12.912         12.984         13.056         13.032          12.92         12.808         12.704         12.628         12.624           12.5          11.66          11.26          10.68           9.9           8.64             1      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.6347         6.7448         6.9773         7.1425         7.2321         7.2843         7.9778         9.7789         10.943         11.546         11.862         12.605         14.503         16.618         20.143         24.421         29.962          41.107   
      2       2        0        6.6476         6.7581         6.9907         7.1658         7.2726         8.8505         10.321          11.23         11.765         12.031          12.12         14.218         15.031         17.953         21.177         25.488         30.742          41.107   
      3       3        0        6.6714         6.7696         7.0001         7.1702         7.8471         9.5071         10.702         11.409         11.816         12.088         12.417         14.419         15.245         17.953         21.177         25.359         30.718          41.107   
      4       1        1         6.885         7.0096         7.2673         7.4592         7.5807         7.6332         8.5312          10.33         11.395         12.055         12.323         13.095         14.808         17.378         20.583         24.862         30.437          41.452   
      5       2        1         6.856          6.987         7.2319         7.4245         7.5495         7.8087         9.6964         11.125         11.906         12.291         12.419         14.036         15.338          17.91         21.588         25.624           31.1          41.453   
      6       3        1        6.8708         6.9855         7.2175         7.4148         7.5369          8.689         10.344         11.414         12.031         12.375         12.425         14.138         15.349         18.334         21.578         25.637         31.109          41.467   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_6.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_7.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_8.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_9.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_10.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_11.png" width="500" /></p>
</div>
<div id="analyze-education-and-marriage-and-age-1" class="section level3" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Analyze Education and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0       -0.27576        0.0889         0.38392        0.55759        0.6492         0.67483        0.65101        0.58994        0.50301        0.40384        0.30758        0.15487         -0.495        -0.32603       -0.20052      -0.10777       -0.02694        0.059385  
      2       1       0        0.55395        1.0284          1.3712         1.5171        1.5475          1.5028         1.4108         1.2868         1.1395        0.97752        0.80229         0.5692       -0.17681       -0.072431      6.452e-05      0.054767        0.10681         0.16633  
      3       0       1        0.78157        1.0452           1.254         1.3788        1.4422           1.453          1.421         1.3524         1.2516         1.1248        0.96981        0.76475        0.35808         0.37506        0.37352       0.37396        0.37781         0.39278  
      4       1       1         1.5319        1.8215          2.0311           2.12        2.1301           2.083         1.9948         1.8734         1.7212         1.5423         1.3324          1.077        0.61838         0.58107        0.53468       0.50009         0.4801         0.47223  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        12.989         12.976         13.032         13.091         13.125         13.069         13.008         12.923         12.835         12.765         12.677         12.499         11.693         11.373         10.867          10.04         8.8533            1      
      2       1       0        12.829         12.789         12.987         13.125         13.195         13.187         13.115         13.008         12.923         12.829         12.792         12.637         11.693         11.373         10.827         10.027           8.84            1      
      3       0       1        12.933         12.923         12.976         13.021         13.067         13.075         12.973         12.872         12.763         12.675         12.637         12.501         11.693         11.333         10.747         9.9467           8.72            1      
      4       1       1        12.757         12.717         12.917         13.035         13.123         13.152          13.08         12.952         12.843         12.747         12.733         12.664          11.68          11.32         10.693           9.92         8.6533            1      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        6.6262         6.6905         6.8287         6.9345         7.2519         8.4212         9.5548         10.642         11.347         11.708         11.988         13.664         14.908         17.489         20.797          25.11         30.455          41.088   
      2       1       0        6.6762         6.8246         7.1501         7.3846         7.6493         8.6734         9.7786          10.97         11.669         12.068         12.278          13.83         14.945         17.526         20.868         25.069         30.493          41.125   
      3       0       1        6.8114         6.8929         7.0479         7.1732          7.262         7.8099          9.397         10.758         11.583         12.016          12.18           13.7         15.111         17.802         21.186         25.266         30.817          41.399   
      4       1       1        6.9297         7.0952         7.4299         7.6925         7.8494         8.2774          9.651         11.154         11.972         12.465         12.598         13.813         15.218         17.946         21.313         25.482         30.947          41.516   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_12.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_13.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_14.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_15.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_16.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_grid_search_images/figure_17.png" width="500" /></p>

</div>
</div>
<div id="small-test-exact-solution-vectorized-bisection" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Small Test Exact Solution Vectorized Bisection</h2>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function with vectorized bisection. Small Solution
Analysis. Small Solution Analysis, husband 5 shocks, wife 1 shocks.</p>
<div id="test-snw_vfi_main-defaults-small-1" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<p>Call the function with defaults parameters.</p>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_bisec_vec(mp_param);

SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:18 of 17, time-this-age:0.036425
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:17 of 17, time-this-age:0.035179
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:16 of 17, time-this-age:0.021283
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:15 of 17, time-this-age:0.01888
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:14 of 17, time-this-age:0.018332
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:13 of 17, time-this-age:0.01803
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:12 of 17, time-this-age:0.040638
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:11 of 17, time-this-age:0.020865
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:10 of 17, time-this-age:0.019525
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:9 of 17, time-this-age:0.025794
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:8 of 17, time-this-age:0.017978
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:7 of 17, time-this-age:0.018489
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:6 of 17, time-this-age:0.019727
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:5 of 17, time-this-age:0.019885
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:4 of 17, time-this-age:0.041926
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:3 of 17, time-this-age:0.032186
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:2 of 17, time-this-age:0.019092
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:1 of 17, time-this-age:0.017174
Completed SNW_VFI_MAIN_BISEC_VEC;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base;time=0.48981</code></pre>
</div>
<div id="small-param-results-define-frames-2" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Small Param Results Define Frames</h3>
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;Hshock&#39;, eta_H_grid});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-3" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Analyze Savings and Shocks</h3>
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
<p>Tabulate value and policies along savings and shocks:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0           -17.393                -9.1596             -4.4164             -1.5921              -0.051057     
      2      0.0097656           -16.967                 -9.023             -4.3405             -1.5316              0.0054282     
      3       0.078125           -14.925                -8.2554             -3.9177             -1.2071                0.30281     
      4        0.26367           -11.699                -6.8681             -3.1808             -0.6913                0.75178     
      5          0.625           -8.2751                -5.1669             -2.2785            -0.13883                 1.1911     
      6         1.2207           -5.3024                -3.4437             -1.3431             0.38362                 1.5638     
      7         2.1094           -2.9816                -1.9066            -0.47797             0.86412                 1.8672     
      8         3.3496           -1.2609               -0.64407             0.28612              1.3001                 2.1163     
      9              5         -0.012543                0.34403              0.9369              1.6782                 2.3266     
     10         7.1191           0.88751                  1.097              1.4725              1.9981                 2.5086     
     11         9.7656            1.5392                  1.665              1.9037              2.2701                 2.6684     
     12         12.998            2.0158                 2.0932              2.2465              2.5004                 2.8071     
     13         16.875            2.3684                 2.4172              2.5172              2.6933                 2.9263     
     14         21.455            2.6328                 2.6644              2.7307              2.8535                 3.0288     
     15         26.797            2.8339                 2.8549              2.8997               2.986                 3.1174     
     16         32.959             2.989                 3.0032               3.034              3.0954                 3.1939     
     17             40            3.1102                   3.12              3.1416              3.1857                 3.2598     
     18         47.979            3.2059                 3.2128              3.2282              3.2603                 3.3164     
     19         56.953            3.2825                 3.2875              3.2986              3.3222                 3.3649     
     20         66.982            3.3443                  3.348              3.3562              3.3738                 3.4064     
     21         78.125            3.3948                 3.3975              3.4036              3.4169                 3.4421     
     22         90.439            3.4364                 3.4384               3.443              3.4532                 3.4728     
     23         103.98            3.4709                 3.4724               3.476              3.4838                 3.4991     
     24         118.82            3.4998                  3.501              3.5037              3.5098                 3.5219     
     25            135            3.5241                 3.5251              3.5272              3.5319                 3.5416     

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0        2.7511e-05              0.0021997            0.046353             0.23828               0.88721      
      2      0.0097656        0.00054711              0.0036547            0.049525             0.24213               0.89276      
      3       0.078125          0.021674               0.027305            0.079481             0.27462               0.93343      
      4        0.26367           0.13129                0.14249             0.19451             0.38201                1.0522      
      5          0.625           0.38703                  0.404             0.44756             0.63879                1.3002      
      6         1.2207           0.83381                0.85545             0.90672              1.0839                 1.735      
      7         2.1094            1.5206                 1.5442              1.6064              1.7452                2.3859      
      8         3.3496             2.477                 2.5013              2.5629              2.6788                3.3301      
      9              5            3.7541                 3.7788              3.8405              3.9859                4.5828      
     10         7.1191             5.416                 5.4412              5.5038              5.6835                6.1821      
     11         9.7656            7.4668                 7.4912              7.5553              7.7413                8.1771      
     12         12.998            9.9008                 9.9211              9.9832              10.174                10.619      
     13         16.875            12.918                  12.94              12.995              13.186                13.709      
     14         21.455            16.519                 16.538              16.594              16.772                17.365      
     15         26.797             20.59                 20.608              20.657              20.825                21.451      
     16         32.959            25.295                 25.313              25.358              25.513                26.139      
     17             40            30.657                  30.68              30.732              30.877                31.477      
     18         47.979            36.751                 36.772              36.831               36.99                37.553      
     19         56.953            43.764                 43.786              43.839              44.003                44.551      
     20         66.982            51.594                 51.617              51.677               51.84                52.393      
     21         78.125            59.942                 59.965              60.024              60.197                60.754      
     22         90.439            69.254                 69.278               69.34              69.515                70.084      
     23         103.98            79.741                 79.762              79.821              79.995                80.573      
     24         118.82            91.103                 91.126              91.188              91.354                91.929      
     25            135            103.46                 103.48              103.53              103.71                104.28      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0           0.3104                   0.44              0.69897             1.2297                 2.3501      
      2      0.0097656           0.3214                0.45001              0.70723             1.2373                  2.356      
      3       0.078125           0.3809                0.50664              0.75724             1.2846                  2.395      
      4        0.26367          0.48992                0.60921               0.8592             1.3937                 2.4925      
      5          0.625          0.65917                0.77131               1.0284             1.5584                 2.6656      
      6         1.2207          0.91141                 1.0172               1.2649             1.8076                 2.9247      
      7         2.1094           1.2649                 1.3671               1.6019             2.1815                 3.3081      
      8         3.3496           1.7572                 1.8573               2.0907             2.6915                 3.8066      
      9              5           2.4045                  2.503               2.7347             3.3043                 4.4728      
     10         7.1191           3.2104                 3.3074                3.537             4.0708                 5.3364      
     11         9.7656           4.2385                 4.3358               4.5627             5.0889                 6.4164      
     12         12.998           5.5627                 5.6635               5.8917             6.4121                 7.7296      
     13         16.875           7.0504                 7.1499               7.3847             7.9039                 9.1418      
     14         21.455           8.7708                 8.8721               9.1059             9.6366                 10.804      
     15         26.797           10.904                 11.007               11.247             11.787                 12.921      
     16         32.959           13.355                 13.457                 13.7             14.254                 15.388      
     17             40           16.168                 16.266               16.502             17.066                 18.225      
     18         47.979           19.337                 19.437               19.666             20.215                 21.411      
     19         56.953           22.744                 22.843               23.078             23.621                 24.831      
     20         66.982           26.557                 26.654               26.883             27.428                 28.633      
     21         78.125           31.145                 31.242                31.47             32.006                 33.206      
     22         90.439           36.128                 36.224               36.451             36.982                 38.171      
     23         103.98           41.364                 41.464               41.692             42.226                 43.405      
     24         118.82           47.222                 47.319               47.545             48.086                 49.269      
     25            135           53.652                 53.751               53.983             54.518                 55.706      </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_0.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_1.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_2.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_3.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_4.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_5.png" width="500" /></p>
</div>
<div id="analyze-kids-and-marriage-and-age-2" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Analyze Kids and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0          1.4699        1.7485         1.9344         1.9907         1.9652         1.8837         1.7641         1.6165         1.4466         1.2616         1.0618          0.8238       0.19347        0.25197          0.2868         0.3051       0.32814         0.35812  
      2       2        0       -0.020723       0.46111        0.83504         1.0389         1.1397         1.1609         1.1252         1.0462        0.93236        0.79061         0.6292         0.41604      -0.28936       -0.16944       -0.085224      -0.023554      0.031782        0.092238  
      3       3        0        -0.77111      -0.30145       0.081934        0.30157        0.41928        0.46457        0.45775        0.41091         0.3315        0.22545       0.099249       -0.086623        -0.891        -0.6764        -0.49835       -0.35725      -0.23987        -0.11178  
      4       1        1          2.0205        2.2326         2.3705         2.4138         2.3913         2.3187         2.2075         2.0627         1.8857         1.6817         1.4504           1.179        0.7219        0.67551         0.61783        0.57189       0.54452         0.52849  
      5       2        1          1.0463        1.3598         1.6057          1.745         1.8111         1.8148         1.7683         1.6781         1.5473         1.3813         1.1846         0.94259       0.50083        0.48628         0.45815        0.43559       0.42423         0.42377  
      6       3        1         0.61068       0.90045         1.1354         1.2721         1.3395         1.3538         1.3254         1.2595          1.158         1.0253        0.86518         0.66237       0.24624        0.27691         0.29102        0.30395       0.31843         0.34526  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        34.929         34.724         34.662          34.55         34.357         34.071         33.675         33.138          32.41         31.485         30.803         29.692         26.809          24.45         21.029         16.751         11.053            0      
      2       2        0          34.6         34.331         34.195          33.99         33.687         33.279         32.753         32.078         31.277         30.722         29.867         28.337         25.882         23.163         19.829         15.512         10.188            0      
      3       3        0        34.185         33.965         33.873           33.7         33.421         33.026         32.501         31.819         31.098         30.596         29.707         28.179         25.818         23.149         19.885         15.683         10.378            0      
      4       1        1        34.819         34.614         34.562         34.453         34.262         33.978         33.584          33.05         32.323          31.41         30.749         29.648         26.678         24.301         20.835         16.605          10.95            0      
      5       2        1        34.667         34.448          34.36         34.201         33.945         33.586         33.111         32.491         31.675         30.932         30.254         28.911         26.231          23.54         20.141         16.002         10.383            0      
      6       3        1          34.3         34.115         34.061         33.932           33.7         33.356         32.887         32.266         31.453         30.814           30.1          28.71         26.147         23.458           20.1         16.005         10.479            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.8551         7.1756          7.502         7.8205         8.1483         8.5053         8.9254          9.453         10.146          11.01         11.598         12.572         14.298         16.657         20.078         24.356         30.054          41.107   
      2       2        0        7.1843         7.5683         7.9695         8.3802         8.8184         9.2974         9.8468         10.513         11.279         11.772         12.534         13.928         15.225         17.944         21.278         25.595         30.919          41.107   
      3       3        0        7.5997          7.934         8.2911         8.6703         9.0841         9.5509         10.099         10.772         11.458         11.899         12.694         14.085         15.289         17.958         21.222         25.424         30.729          41.107   
      4       1        1        7.1871         7.5271         7.8696          8.209         8.5573         8.9343          9.372         9.9144         10.624         11.492         12.073         13.048         14.733          17.12         20.594         24.833         30.495          41.452   
      5       2        1        7.3044         7.6564         8.0306         8.4165          8.826         9.2748         9.7901         10.416         11.212         11.907         12.503         13.719         15.182         17.883          21.29         25.437         31.064          41.453   
      6       3        1        7.6479         7.9629         8.3009         8.6543         9.0382         9.4691         9.9762         10.602         11.392         11.982         12.612         13.873         15.277         17.976         21.344         25.447         30.981          41.467   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_6.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_7.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_8.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_9.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_10.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_11.png" width="500" /></p>
</div>
<div id="analyze-education-and-marriage-and-age-2" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Analyze Education and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0       -0.19018        0.16944        0.46325        0.63924        0.73534        0.76637        0.74726        0.68846        0.59811        0.48481        0.35723        0.18295       -0.48645        -0.32469       -0.19921       -0.1063       -0.026858       0.059385  
      2       1       0        0.64221         1.1027         1.4377         1.5815         1.6141         1.5731         1.4841         1.3606         1.2089         1.0336        0.83628        0.58586       -0.17147       -0.071224      0.0013591      0.055829         0.10689        0.16633  
      3       0       1        0.85396         1.1146         1.3219         1.4469         1.5109         1.5218         1.4879         1.4139         1.3025         1.1591         0.9878        0.77311        0.35952         0.37647        0.37498       0.37407         0.37796        0.39278  
      4       1       1         1.5977         1.8806         2.0859         2.1737         2.1837         2.1364         2.0462         1.9196         1.7582         1.5664         1.3457         1.0828        0.61979         0.58266        0.53636       0.50021         0.48016        0.47223  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0         34.68         34.441         34.268         34.044         33.748         33.368          32.88         32.246           31.5         30.837         30.003         28.572         26.161         23.581         20.244         15.976         10.537            0      
      2       1       0        34.463         34.238         34.218         34.116         33.895         33.549         33.072         32.444          31.69         31.032         30.249         28.899         26.178         23.593         20.251         15.988         10.543            0      
      3       0       1        34.723         34.511         34.368         34.173         33.909         33.563         33.112         32.518         31.726         30.961         30.259          28.94          26.36          23.78         20.379         16.217         10.615            0      
      4       1       1        34.468         34.274         34.287         34.218         34.029         33.717         33.276         32.687         31.908         31.143         30.476         29.239         26.344         23.753         20.338         16.191         10.593            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        7.1043         7.4114         7.7391         8.0887         8.4765         8.9169         9.4349         10.072         10.794         11.403         12.153         13.468         14.928         17.507         20.844         25.112         30.552          41.088   
      2       1       0        7.3218         7.7071         8.1025          8.492         8.8907         9.3189         9.8129          10.42         11.128         11.718         12.397         13.589         14.947         17.532         20.874         25.138         30.583          41.125   
      3       0       1        7.2329         7.5281         7.8428         8.1801         8.5525         8.9751         9.4717         10.083         10.863         11.587         12.215         13.426         15.003         17.592             21          25.17         30.778          41.399   
      4       1       1        7.5267         7.9028         8.2913         8.6732         9.0619         9.4769         9.9539         10.538         11.288         12.001         12.577         13.667         15.125         17.728         21.152         25.309         30.915          41.516   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_12.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_13.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_14.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_15.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_16.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_17.png" width="500" /></p>

</div>
</div>
<div id="small-test-exact-solution-spousal-shocks" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Small Test Exact Solution Spousal Shocks</h2>
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function with vectorized bisection. Small Solution
Analysis, husband 5 shocks, wife 3 shocks.</p>
<div id="test-snw_vfi_main-defaults-small-2" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<p>Call the function with default parameters.</p>
<pre><code>mp_param = snw_mp_param(&#39;default_small53&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_bisec_vec(mp_param);

SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:18 of 17, time-this-age:0.067387
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:17 of 17, time-this-age:0.057287
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:16 of 17, time-this-age:0.050539
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:15 of 17, time-this-age:0.058199
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:14 of 17, time-this-age:0.063318
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:13 of 17, time-this-age:0.054712
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:12 of 17, time-this-age:0.052556
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:11 of 17, time-this-age:0.054997
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:10 of 17, time-this-age:0.054287
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:9 of 17, time-this-age:0.054836
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:8 of 17, time-this-age:0.060559
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:7 of 17, time-this-age:0.064994
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:6 of 17, time-this-age:0.051121
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:5 of 17, time-this-age:0.057983
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:4 of 17, time-this-age:0.059449
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:3 of 17, time-this-age:0.059965
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:2 of 17, time-this-age:0.065501
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:1 of 17, time-this-age:0.058677
Completed SNW_VFI_MAIN_BISEC_VEC;SNW_MP_PARAM=default_small53;SNW_MP_CONTROL=default_base;time=1.0858</code></pre>
</div>
<div id="small-param-results-define-frames-3" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Small Param Results Define Frames</h3>
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;eta&#39;, 1:length(eta_H_grid)});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-4" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Analyze Savings and Shocks</h3>
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;it_legend_select&#39;) = 9; % how many shock legends to show
mp_support_graph(&#39;cl_colors&#39;) = &#39;jet&#39;;</code></pre>
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
<p>Tabulate value and policies along savings and shocks:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0      -20.307       -10.285       -5.0527      -2.1772       -0.66137      -17.128          -8.86       -4.1921       -1.4704     0.00095912       -12.615        -5.8428         -2.2952      -0.25696        0.86491  
      2      0.0097656      -19.558       -10.063       -4.9312      -2.0759        -0.5645        -16.7        -8.7231       -4.1163         -1.41         0.0574       -12.248        -5.7353         -2.2349      -0.20751        0.91164  
      3       0.078125      -16.259       -8.8768       -4.2806      -1.5512      -0.069704      -14.621        -7.9507       -3.6938        -1.086        0.35471       -10.535        -5.1426          -1.909      0.049164         1.1499  
      4        0.26367      -12.127        -7.062        -3.289      -0.8157        0.59457      -11.347        -6.5534       -2.9578      -0.56998        0.80539       -7.9247        -4.1045         -1.3699       0.43225         1.4877  
      5          0.625      -8.3166        -5.145       -2.2609      -0.1528         1.1414      -7.9072        -4.8565       -2.0637     -0.018812         1.2467       -5.2638        -2.8642        -0.73451       0.81964         1.7979  
      6         1.2207      -5.2004       -3.3395       -1.2735        0.417         1.5609      -4.9697        -3.1643       -1.1499       0.49662         1.6182       -3.0506        -1.6349       -0.088315         1.173         2.0492  
      7         2.1094      -2.8448       -1.7849      -0.39262      0.91448         1.8837      -2.7126        -1.6766      -0.31413       0.96465         1.9173       -1.3814       -0.55616         0.50316        1.4945         2.2497  
      8         3.3496      -1.1351      -0.53317         0.368       1.3497         2.1394      -1.0585       -0.46635       0.41876        1.3838         2.1606      -0.16408        0.32461          1.0281        1.7889         2.4163  
      9              5     0.088433       0.43451        1.0071       1.7212         2.3505       0.1334        0.47583        1.0402        1.7447         2.3647       0.72646         1.0216          1.4835        2.0512         2.5615  
     10         7.1191      0.96365        1.1669        1.5292       2.0348         2.5311      0.99051         1.1926        1.5509        2.0508         2.5408         1.381         1.5652          1.8682        2.2812         2.6915  
     11         9.7656       1.5949        1.7173         1.948       2.3007         2.6878       1.6112         1.7335        1.9623        2.3117         2.6948        1.8676          1.986          2.1873        2.4836         2.8096  
     12         12.998       2.0558        2.1316        2.2803       2.5253         2.8229        2.066          2.142        2.2898        2.5329         2.8282         2.235         2.3126          2.4482        2.6603         2.9157  
     13         16.875        2.397        2.4453        2.5427       2.7131          2.939       2.4035          2.452        2.5491        2.7184         2.9429        2.5168         2.5682          2.6604        2.8124         3.0102  
     14         21.455       2.6533        2.6848        2.7497        2.869         3.0391       2.6576         2.6892        2.7541        2.8728          3.042        2.7348         2.7694          2.8327        2.9418         3.0938  
     15         26.797       2.8488        2.8698        2.9139        2.998         3.1258       2.8517         2.8728        2.9169        3.0008          3.128        2.9053          2.929           2.973        3.0517         3.1679  
     16         32.959       2.9999        3.0142        3.0447       3.1047         3.2007       3.0019         3.0163        3.0468        3.1067         3.2024        3.0398         3.0563          3.0874        3.1445         3.2331  
     17             40       3.1182        3.1282        3.1496       3.1929         3.2653       3.1196         3.1296        3.1511        3.1943         3.2665        3.1467         3.1585          3.1808        3.2226         3.2903  
     18         47.979       3.2119         3.219        3.2343       3.2659         3.3208       3.2129           3.22        3.2354         3.267         3.3217        3.2326         3.2412          3.2574        3.2883         3.3402  
     19         56.953        3.287        3.2921        3.3033       3.3266         3.3685       3.2876         3.2928        3.3041        3.3274         3.3692        3.3022         3.3085          3.3204        3.3436         3.3836  
     20         66.982       3.3477        3.3515        3.3597       3.3772         3.4093       3.3482          3.352        3.3603        3.3778         3.4099         3.359         3.3638          3.3727        3.3902         3.4212  
     21         78.125       3.3974        3.4002        3.4064       3.4196         3.4444       3.3978         3.4006        3.4068        3.4201         3.4449        3.4059         3.4095          3.4162        3.4296         3.4538  
     22         90.439       3.4384        3.4405        3.4452       3.4553         3.4746       3.4386         3.4408        3.4455        3.4556          3.475        3.4448         3.4475          3.4527        3.4631          3.482  
     23         103.98       3.4724        3.4741        3.4776       3.4854         3.5006       3.4726         3.4743        3.4779        3.4857         3.5009        3.4774         3.4795          3.4835        3.4915         3.5065  
     24         118.82        3.501        3.5022         3.505       3.5111         3.5231       3.5012         3.5024        3.5052        3.5113         3.5233        3.5048         3.5064          3.5096        3.5159         3.5278  
     25            135       3.5251        3.5261        3.5282        3.533         3.5426       3.5252         3.5262        3.5284        3.5332         3.5427        3.5281         3.5294          3.5318        3.5368         3.5464  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0    2.7511e-05    0.0015443      0.029727      0.16652       0.75086      0.0035167     0.0042603      0.043854      0.21583        0.83338        1.5955         1.7722         1.9915         2.3804         3.2582   
      2      0.0097656    0.00054711    0.0027834      0.031634      0.16984       0.75642      0.0051139     0.0066314      0.046571      0.21945        0.83888        1.5998         1.7769         1.9969          2.386         3.2648   
      3       0.078125      0.015731     0.018652      0.049638      0.19667       0.79532       0.036331      0.035124      0.074693      0.25011        0.87882        1.6423          1.817         2.0397         2.4285         3.3119   
      4        0.26367      0.093357       0.0908       0.12387       0.2854        0.9063        0.14147        0.1469       0.18583      0.35494        0.99636        1.7783         1.9494         2.1732         2.5528         3.4416   
      5          0.625       0.31381      0.31997       0.35088      0.51766        1.1457        0.38798       0.39856       0.43189      0.60421         1.2383         2.051         2.2255         2.4455         2.8167         3.6996   
      6         1.2207       0.74541       0.7447       0.78537      0.95128        1.5671        0.82632       0.84079       0.88329       1.0442         1.6681        2.5002         2.6749         2.9067         3.2651         4.1388   
      7         2.1094        1.4161       1.4196        1.4616       1.6183        2.2194         1.5017        1.5185        1.5708       1.6991         2.3185        3.1748         3.3588         3.5879         3.9329         4.7921   
      8         3.3496        2.3637       2.3696        2.4109       2.5645        3.1433         2.4459        2.4644        2.5164       2.6383         3.2555        4.1398         4.3214         4.5446         4.8805         5.7465   
      9              5        3.6292       3.6363         3.678       3.8404        4.3795         3.7121        3.7315        3.7849       3.9394         4.4976         5.395         5.5871         5.8194         6.1609         6.9911   
     10         7.1191        5.2766       5.2846         5.326       5.4907        5.9774         5.3608          5.38         5.435       5.6101         6.0855        7.0225         7.2023         7.4285         7.8041         8.5595   
     11         9.7656        7.3022       7.3101        7.3505       7.5158        7.9941         7.3941        7.4119        7.4681       7.6451         8.0859        9.1117          9.277         9.5014         9.8542         10.588   
     12         12.998        9.7443       9.7504        9.7888       9.9552        10.482          9.823         9.839        9.8908       10.073         10.549        11.524         11.716         11.936          12.29          13.01   
     13         16.875        12.756       12.762        12.797       12.958        13.553         12.833        12.848        12.896       13.075         13.639        14.514         14.714         14.964          15.32          16.07   
     14         21.455        16.326        16.33        16.365       16.512        17.127         16.414        16.428        16.475        16.64         17.257        18.049          18.25         18.511           18.9         19.655   
     15         26.797         20.39       20.392        20.419       20.557        21.172         20.476        20.486        20.526       20.681         21.312        22.069         22.255          22.51         22.906         23.734   
     16         32.959        25.075       25.082        25.112       25.235        25.829         25.163        25.177        25.213       25.353          25.97        26.762         26.945         27.185         27.569         28.412   
     17             40        30.452        30.46        30.499       30.623        31.182          30.53        30.546        30.596       30.728         31.311        32.148          32.33         32.568         32.935         33.777   
     18         47.979        36.549       36.557        36.599       36.745        37.265         36.623        36.639        36.688       36.844         37.385        38.334         38.506         38.741         39.111         39.908   
     19         56.953         43.56       43.567        43.602       43.748         44.27         43.634        43.649        43.695        43.85         44.387        45.199         45.356         45.576         45.938         46.718   
     20         66.982        51.366       51.375        51.418       51.556        52.091         51.446        51.462        51.512       51.664          52.21         52.91         53.062         53.271         53.614         54.381   
     21         78.125        59.653       59.661        59.707       59.864        60.396         59.747        59.764        59.819       59.981         60.528        61.512         61.662         61.866           62.2         62.945   
     22         90.439        69.009       69.015        69.057       69.216        69.764         69.089        69.105        69.158       69.327         69.883        70.924         71.074         71.276         71.602         72.327   
     23         103.98        79.499       79.505        79.547       79.696         80.26         79.579        79.594        79.643       79.803         80.376        81.353         81.506         81.707          82.03         82.739   
     24         118.82        90.869       90.876        90.918       91.063        91.614         90.945        90.961        91.012       91.169         91.733        92.748         92.913         93.122         93.444         94.138   
     25            135        103.22       103.22        103.26       103.41        103.95          103.3        103.31        103.36       103.52         104.07        105.13         105.34          105.6            106         106.84   

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0     0.17596        0.2993        0.5664        1.1423        2.3148       0.30691       0.43794       0.70147        1.2522         2.404         1.5154         1.6769         1.9935         2.5909         3.7828   
      2      0.0097656     0.18702       0.30957       0.57594        1.1504        2.3206       0.31683       0.44704       0.71018          1.26        2.4098         1.5225         1.6837         1.9995         2.5967         3.7875   
      3       0.078125     0.25285       0.37423       0.63806        1.2035        2.3616       0.36625       0.49882       0.76203        1.3091        2.4496         1.5602         1.7235         2.0365         2.6339           3.82   
      4        0.26367     0.39479       0.52047       0.78122        1.3316        2.4672       0.47974       0.60481       0.86788        1.4208        2.5484         1.6418          1.808         2.1194         2.7256         3.9064   
      5          0.625     0.60083       0.71594       0.97718        1.5213        2.6493       0.65823       0.77675        1.0441        1.5929        2.7275         1.7921         1.9541         2.2684         2.8824         4.0688   
      6         1.2207     0.87005        0.9899        1.2392        1.7827        2.9223       0.91891        1.0319        1.2883        1.8474        2.9915         2.0393            2.2         2.5012         3.1274         4.3226   
      7         2.1094      1.2414         1.355        1.6005        2.1515         3.305        1.2838        1.3928        1.6375        2.2276        3.3755         2.4018          2.552         2.8548         3.4935         4.7027   
      8         3.3496      1.7441        1.8535        2.0975        2.6496        3.8243        1.7883        1.8942        2.1372        2.7321        3.8812          2.882         3.0338         3.3413          3.988         5.1899   
      9              5      2.4043        2.5112        2.7528        3.2942        4.5075        2.4465        2.5503        2.7904        3.3509         4.558         3.5478         3.6884         3.9857          4.626          5.863   
     10         7.1191      3.2256        3.3306         3.571        4.1085        5.3729        3.2656        3.3686        3.6057        4.1441         5.433          4.385         4.5374         4.8399         5.4451         6.7564   
     11         9.7656      4.2795        4.3841        4.6243        5.1596        6.4314        4.3112        4.4151        4.6499        5.1851        6.5075          5.372         5.5385         5.8422         6.4694         7.8019   
     12         12.998       5.596        5.7019        5.9433        6.4763        7.6989        5.6405        5.7456         5.984        6.5134        7.7994         6.7151         6.8549         7.1626         7.7877         9.1338   
     13         16.875      7.0899        7.1954        7.4401         7.977        9.1305        7.1353        7.2414        7.4835        8.0144        9.2117         8.2289         8.3607         8.6372         9.2606         10.575   
     14         21.455      8.8406        8.9481        9.1919        9.7431        10.875        8.8751         8.982        9.2248        9.7689        10.912         10.013         10.143         10.409         10.999         12.308   
     15         26.797      10.982        11.091        11.342        11.901        13.033        11.017        11.129        11.378        11.931        13.061         12.197         12.341         12.613         13.195         14.431   
     16         32.959      13.452        13.557        13.805        14.378        15.531        13.487        13.593        13.846        14.414        15.557         14.658         14.806         15.093         15.687         16.907   
     17             40      16.251        16.354        16.593        17.165        18.352        16.296          16.4        16.638        17.214         18.39         17.447         17.596         17.884         18.495         19.716   
     18         47.979      19.418        19.521        19.756        20.307        21.532        19.465         19.57         19.81        20.361        21.579         20.524         20.682         20.974         21.581         22.847   
     19         56.953      22.826         22.93        23.172        23.723        24.945        22.874        22.979        23.221        23.774        24.995         24.078         24.251         24.557         25.173         26.456   
     20         66.982      26.663        26.765            27        27.557        28.767        26.705        26.809        27.048        27.603        28.816         28.009         28.188         28.505         29.139         30.435   
     21         78.125      31.312        31.414        31.646        32.184        33.397         31.34        31.443        31.676        32.221        33.432         32.342         32.523         32.845         33.488         34.805   
     22         90.439      36.251        36.355        36.591        37.128        38.324        36.293        36.397        36.632         37.17        38.372         37.225         37.406          37.73         38.381         39.718   
     23         103.98      41.485        41.589        41.825        42.372        43.552        41.526        41.632        41.871        42.418        43.602         42.519         42.697         43.022         43.676         45.029   
     24         118.82      47.334        47.438        47.674        48.224        49.417         47.38        47.484        47.722        48.271        49.465         48.344         48.509         48.826         49.482          50.85   
     25            135      53.768        53.874        54.112        54.659         55.86        53.813        53.919         54.16        54.707        55.908         54.747         54.871         55.135         55.709         56.935   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_0.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_1.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_2.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_3.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_4.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_5.png" width="500" /></p>
</div>
<div id="analyze-kids-and-marriage-and-age-3" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Analyze Kids and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0          1.4699        1.7485         1.9344         1.9907         1.9652         1.8837         1.7641         1.6165         1.4466         1.2616         1.0618          0.8238       0.19347        0.25197          0.2868         0.3051       0.32814         0.35812  
      2       2        0       -0.020723       0.46111        0.83504         1.0389         1.1397         1.1609         1.1252         1.0462        0.93236        0.79061         0.6292         0.41604      -0.28936       -0.16944       -0.085224      -0.023554      0.031782        0.092238  
      3       3        0        -0.77111      -0.30145       0.081934        0.30157        0.41928        0.46457        0.45775        0.41091         0.3315        0.22545       0.099249       -0.086623        -0.891        -0.6764        -0.49835       -0.35725      -0.23987        -0.11178  
      4       1        1          2.7247        2.8812         2.9832         2.9923         2.9362         2.8303         2.6846         2.5031         2.2863         2.0409         1.7685          1.4602        0.9713        0.84567         0.72538        0.63075       0.57245         0.52891  
      5       2        1          1.8762        2.1212         2.3182         2.4103         2.4302         2.3894          2.299         2.1643         1.9874         1.7749         1.5324          1.2495       0.77069        0.67178         0.57558        0.49917       0.45412         0.42365  
      6       3        1          1.4732        1.7023         1.8951         1.9893         2.0142         1.9854         1.9129         1.8008         1.6505         1.4672         1.2558          1.0059       0.54836        0.48473         0.42172        0.37291       0.34834         0.33971  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        34.929         34.724         34.662          34.55         34.357         34.071         33.675         33.138          32.41         31.485         30.803         29.692         26.809          24.45         21.029         16.751         11.053            0      
      2       2        0          34.6         34.331         34.195          33.99         33.687         33.279         32.753         32.078         31.277         30.722         29.867         28.337         25.882         23.163         19.829         15.512         10.188            0      
      3       3        0        34.185         33.965         33.873           33.7         33.421         33.026         32.501         31.819         31.098         30.596         29.707         28.179         25.818         23.149         19.885         15.683         10.378            0      
      4       1        1        35.711         35.608         35.696         35.722         35.654         35.486         35.206         34.788         34.175         33.388         32.652         31.486         27.906         25.403         21.822         17.365         11.474            0      
      5       2        1        35.365         35.243          35.28         35.238         35.095         34.842         34.468         33.945         33.223         32.537         31.735         30.425         27.341         24.623         21.079         16.721         10.908            0      
      6       3        1          34.9         34.807         34.856         34.829         34.694         34.439         34.064          33.53         32.812         32.172         31.369         30.015           27.3         24.592          21.09         16.777         11.002            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.8551         7.1756          7.502         7.8205         8.1483         8.5053         8.9254          9.453         10.146          11.01         11.598         12.572         14.298         16.657         20.078         24.356         30.054          41.107   
      2       2        0        7.1843         7.5683         7.9695         8.3802         8.8184         9.2974         9.8468         10.513         11.279         11.772         12.534         13.928         15.225         17.944         21.278         25.595         30.919          41.107   
      3       3        0        7.5997          7.934         8.2911         8.6703         9.0841         9.5509         10.099         10.772         11.458         11.899         12.694         14.085         15.289         17.958         21.222         25.424         30.729          41.107   
      4       1        1        7.8017         8.1851         8.5662         8.9367         9.3167         9.7217         10.181         10.736          11.45         12.299         13.048         14.161         15.563          18.14         21.791         26.311          32.26          43.784   
      5       2        1        7.8815         8.2584         8.6593         9.0691         9.4965         9.9609          10.49         11.127         11.929         12.659         13.458         14.701         16.139         18.932         22.547         26.968         32.839          43.798   
      6       3        1        8.1632         8.4941         8.8603         9.2345         9.6357         10.084         10.598         11.231         12.014         12.685         13.474         14.753         16.273         19.059         22.634         27.013         32.848          43.903   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_6.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_7.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_8.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_9.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_10.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_11.png" width="500" /></p>
</div>
<div id="analyze-education-and-marriage-and-age-3" class="section level3" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Analyze Education and Marriage and Age</h3>
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
<p>Tabulate value and policies:</p>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0       -0.19018        0.16944        0.46325        0.63924        0.73534        0.76637        0.74726        0.68846        0.59811        0.48481        0.35723        0.18295       -0.48645        -0.32469       -0.19921       -0.1063       -0.026858       0.059385  
      2       1       0        0.64221         1.1027         1.4377         1.5815         1.6141         1.5731         1.4841         1.3606         1.2089         1.0336        0.83628        0.58586       -0.17147       -0.071224      0.0013591      0.055829         0.10689        0.16633  
      3       0       1         1.7253         1.9221         2.0804         2.1589         2.1772         2.1432         2.0641         1.9433         1.7825         1.5882         1.3655         1.1044        0.65392         0.57885        0.50361       0.44477         0.41174        0.39361  
      4       1       1         2.3242         2.5478         2.7173          2.769         2.7432         2.6602         2.5336         2.3688          2.167         1.9338         1.6723         1.3726        0.87298         0.75594        0.64485       0.55712         0.50486        0.46791  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0         34.68         34.441         34.268         34.044         33.748         33.368          32.88         32.246           31.5         30.837         30.003         28.572         26.161         23.581         20.244         15.976         10.537            0      
      2       1       0        34.463         34.238         34.218         34.116         33.895         33.549         33.072         32.444          31.69         31.032         30.249         28.899         26.178         23.593         20.251         15.988         10.543            0      
      3       0       1        35.361         35.231         35.189         35.094         34.928         34.679         34.323          33.82         33.118         32.391         31.597         30.297         27.367         24.751          21.23         16.872         11.068            0      
      4       1       1         35.29         35.207         35.366         35.432         35.368         35.166         34.836         34.355         33.688         33.007          32.24         30.987         27.664         24.994         21.431         17.037         11.187            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        7.1043         7.4114         7.7391         8.0887         8.4765         8.9169         9.4349         10.072         10.794         11.403         12.153         13.468         14.928         17.507         20.844         25.112         30.552          41.088   
      2       1       0        7.3218         7.7071         8.1025          8.492         8.8907         9.3189         9.8129          10.42         11.128         11.718         12.397         13.589         14.947         17.532         20.874         25.138         30.583          41.125   
      3       0       1         7.761         8.0772         8.4119         8.7662         9.1545         9.5892         10.095         10.713         11.494          12.26          13.05         14.296         15.848         18.531         22.115          26.53         32.385          43.499   
      4       1       1        8.1365         8.5478         8.9787          9.394         9.8115         10.255         10.751          11.35         12.102         12.835         13.603          14.78         16.135         18.891         22.532         26.998         32.912          44.158   </code></pre>
<p>Graph Mean Values:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_12.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_13.png" width="500" /></p>
<p>Graph Mean Savings Choices:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_14.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_15.png" width="500" /></p>
<p>Graph Mean Consumption:</p>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_16.png" width="500" /></p>
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_17.png" width="500" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="solving-the-dynamic-life-cycle-problem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="solution-with-unemployment.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["NSW-Dynamic-Life-Cycle-and-Stimulus-Checks-Code-Companion.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
