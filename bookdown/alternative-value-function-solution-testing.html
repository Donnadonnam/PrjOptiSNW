<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion</title>
  <meta name="description" content="This function solves for the V(states) for individuals at lower and higher discount factor . We allow for heterogeneity in the model to consider both patient and impatient households. The key difference is that patient households are more willing to save and will consume less." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This function solves for the V(states) for individuals at lower and higher discount factor . We allow for heterogeneity in the model to consider both patient and impatient households. The key difference is that patient households are more willing to save and will consume less." />
  <meta name="github-repo" content="fanwangecon/PrjOptiSNW" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Alternative Value Function Solution Testing | NSW Dynamic Life Cycle and Stimulus Checks Code Companion" />
  
  <meta name="twitter:description" content="This function solves for the V(states) for individuals at lower and higher discount factor . We allow for heterogeneity in the model to consider both patient and impatient households. The key difference is that patient households are more willing to save and will consume less." />
  

<meta name="author" content="Vegard M. Nygård, Bent E. Sørensen, and Fan Wang" />


<meta name="date" content="2022-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="solving-the-dynamic-life-cycle-problem.html"/>
<link rel="next" href="solution-with-unemployment.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-10');
</script>



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NSW Dynamic Life Cycle and Stimulus Checks Code Companion</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#household-problem-and-distributions"><i class="fa fa-check"></i><b>1.1</b> Household Problem and Distributions</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#flat-script-and-code-package"><i class="fa fa-check"></i><b>1.1.1</b> Flat Script and Code Package</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#dynamic-programming-solution-structure-covidless-world"><i class="fa fa-check"></i><b>1.1.2</b> Dynamic Programming Solution Structure COVIDless World</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#dynamic-programming-solution-structure-during-covid-year"><i class="fa fa-check"></i><b>1.1.3</b> Dynamic Programming Solution Structure during COVID Year</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction.html"><a href="introduction.html#dynamic-programming-solution-structure-bush-stimulus-checks"><i class="fa fa-check"></i><b>1.1.4</b> Dynamic Programming Solution Structure Bush Stimulus Checks</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#values-of-checks-conditional-on-2019-information"><i class="fa fa-check"></i><b>1.2</b> Values of Checks Conditional on 2019 Information</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#expected-outcomes-given-2019-information"><i class="fa fa-check"></i><b>1.2.1</b> Expected Outcomes given 2019 Information</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#dynamic-programming-timing"><i class="fa fa-check"></i><b>1.2.2</b> Dynamic Programming Timing</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#the-stimulus-check-planning-problem"><i class="fa fa-check"></i><b>1.3</b> The Stimulus Check Planning Problem</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#information-planning-problem"><i class="fa fa-check"></i><b>1.3.1</b> 2019 Information Planning Problem</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#allocation-functions"><i class="fa fa-check"></i><b>1.3.2</b> Allocation Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="parameters.html"><a href="parameters.html"><i class="fa fa-check"></i><b>2</b> Parameters</a>
<ul>
<li class="chapter" data-level="2.1" data-path="parameters.html"><a href="parameters.html#model-parameters"><i class="fa fa-check"></i><b>2.1</b> Model Parameters</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="parameters.html"><a href="parameters.html#parameters-used-for-test-simulation"><i class="fa fa-check"></i><b>2.1.1</b> Parameters Used for Test Simulation</a></li>
<li class="chapter" data-level="2.1.2" data-path="parameters.html"><a href="parameters.html#documentation-run-parameters-docdense"><i class="fa fa-check"></i><b>2.1.2</b> Documentation Run Parameters Docdense</a></li>
<li class="chapter" data-level="2.1.3" data-path="parameters.html"><a href="parameters.html#parameters-used-for-paper-simulations"><i class="fa fa-check"></i><b>2.1.3</b> Parameters Used for Paper Simulations</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="parameters.html"><a href="parameters.html#model-controls"><i class="fa fa-check"></i><b>2.2</b> Model Controls</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="parameters.html"><a href="parameters.html#test-snw_mp_controls-defaults"><i class="fa fa-check"></i><b>2.2.1</b> Test SNW_MP_CONTROLS Defaults</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html"><i class="fa fa-check"></i><b>3</b> Solving the Dynamic Life Cycle Problem</a>
<ul>
<li class="chapter" data-level="3.1" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#life-cycle-dynamic-programming-with-marital-status-children-and-savings"><i class="fa fa-check"></i><b>3.1</b> Life Cycle Dynamic Programming with Marital Status, Children and Savings</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#test-snw_vfi_main_bisect_vec-defaults"><i class="fa fa-check"></i><b>3.1.1</b> Test SNW_VFI_MAIN_BISECT_VEC Defaults</a></li>
<li class="chapter" data-level="3.1.2" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#define-parameters"><i class="fa fa-check"></i><b>3.1.2</b> Define Parameters</a></li>
<li class="chapter" data-level="3.1.3" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-savings-and-shocks"><i class="fa fa-check"></i><b>3.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="3.1.4" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-kids-and-marriage-and-age"><i class="fa fa-check"></i><b>3.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="3.1.5" data-path="solving-the-dynamic-life-cycle-problem.html"><a href="solving-the-dynamic-life-cycle-problem.html#analyze-education-and-marriage-and-age"><i class="fa fa-check"></i><b>3.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html"><i class="fa fa-check"></i><b>4</b> Alternative Value Function Solution Testing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-looped-minimizer"><i class="fa fa-check"></i><b>4.1</b> Small Test Exact Solution Looped Minimizer</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small"><i class="fa fa-check"></i><b>4.1.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.1.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames"><i class="fa fa-check"></i><b>4.1.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-1"><i class="fa fa-check"></i><b>4.1.3</b> Analyze Savings and Shocks</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-grid-search-solution"><i class="fa fa-check"></i><b>4.2</b> Small Test Grid Search Solution</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main_grid_search-defaults-small"><i class="fa fa-check"></i><b>4.2.1</b> Test SNW_VFI_MAIN_GRID_SEARCH Defaults Small</a></li>
<li class="chapter" data-level="4.2.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-1"><i class="fa fa-check"></i><b>4.2.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.2.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-2"><i class="fa fa-check"></i><b>4.2.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.2.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-1"><i class="fa fa-check"></i><b>4.2.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.2.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-1"><i class="fa fa-check"></i><b>4.2.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-vectorized-bisection"><i class="fa fa-check"></i><b>4.3</b> Small Test Exact Solution Vectorized Bisection</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small-1"><i class="fa fa-check"></i><b>4.3.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.3.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-2"><i class="fa fa-check"></i><b>4.3.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.3.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-3"><i class="fa fa-check"></i><b>4.3.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.3.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-2"><i class="fa fa-check"></i><b>4.3.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.3.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-2"><i class="fa fa-check"></i><b>4.3.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-test-exact-solution-spousal-shocks"><i class="fa fa-check"></i><b>4.4</b> Small Test Exact Solution Spousal Shocks</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#test-snw_vfi_main-defaults-small-2"><i class="fa fa-check"></i><b>4.4.1</b> Test SNW_VFI_MAIN Defaults Small</a></li>
<li class="chapter" data-level="4.4.2" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#small-param-results-define-frames-3"><i class="fa fa-check"></i><b>4.4.2</b> Small Param Results Define Frames</a></li>
<li class="chapter" data-level="4.4.3" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-savings-and-shocks-4"><i class="fa fa-check"></i><b>4.4.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="4.4.4" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-kids-and-marriage-and-age-3"><i class="fa fa-check"></i><b>4.4.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="4.4.5" data-path="alternative-value-function-solution-testing.html"><a href="alternative-value-function-solution-testing.html#analyze-education-and-marriage-and-age-3"><i class="fa fa-check"></i><b>4.4.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html"><i class="fa fa-check"></i><b>5</b> Solution with Unemployment</a>
<ul>
<li class="chapter" data-level="5.1" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#life-cycle-dynamic-programming-under-unemployment-shock"><i class="fa fa-check"></i><b>5.1</b> Life Cycle Dynamic Programming under Unemployment Shock</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#test-snw_vfi_unemp"><i class="fa fa-check"></i><b>5.1.1</b> Test SNW_VFI_UNEMP</a></li>
<li class="chapter" data-level="5.1.2" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#define-parameter-frames"><i class="fa fa-check"></i><b>5.1.2</b> Define Parameter Frames</a></li>
<li class="chapter" data-level="5.1.3" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-savings-and-shocks-5"><i class="fa fa-check"></i><b>5.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="5.1.4" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-kids-and-marriage-and-age-4"><i class="fa fa-check"></i><b>5.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="5.1.5" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-education-and-marriage-and-age-4"><i class="fa fa-check"></i><b>5.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#life-cycle-dynamic-programming-under-great-recession-unemployment-shock"><i class="fa fa-check"></i><b>5.2</b> Life Cycle Dynamic Programming under Great Recession Unemployment Shock</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#test-snw_v08p08_jaeemk"><i class="fa fa-check"></i><b>5.2.1</b> Test SNW_V08P08_JAEEMK</a></li>
<li class="chapter" data-level="5.2.2" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#define-parameter-frames-1"><i class="fa fa-check"></i><b>5.2.2</b> Define Parameter Frames</a></li>
<li class="chapter" data-level="5.2.3" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-savings-and-shocks-6"><i class="fa fa-check"></i><b>5.2.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="5.2.4" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-kids-and-marriage-and-age-5"><i class="fa fa-check"></i><b>5.2.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="5.2.5" data-path="solution-with-unemployment.html"><a href="solution-with-unemployment.html#analyze-education-and-marriage-and-age-5"><i class="fa fa-check"></i><b>5.2.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html"><i class="fa fa-check"></i><b>6</b> Solution with First and Second Rounds CARES Stimulus</a>
<ul>
<li class="chapter" data-level="6.1" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#life-cycle-dynamic-programming-under-with-cares-act-stimulus-checks"><i class="fa fa-check"></i><b>6.1</b> Life Cycle Dynamic Programming under with CARES Act Stimulus Checks</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#test-snw_vfi_main_bisec_vec_stimulus"><i class="fa fa-check"></i><b>6.1.1</b> Test SNW_VFI_MAIN_BISEC_VEC_STIMULUS</a></li>
<li class="chapter" data-level="6.1.2" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#define-parameter-frames-2"><i class="fa fa-check"></i><b>6.1.2</b> Define Parameter Frames</a></li>
<li class="chapter" data-level="6.1.3" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-savings-and-shocks-7"><i class="fa fa-check"></i><b>6.1.3</b> Analyze Savings and Shocks</a></li>
<li class="chapter" data-level="6.1.4" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-kids-and-marriage-and-age-6"><i class="fa fa-check"></i><b>6.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="6.1.5" data-path="solution-with-first-and-second-rounds-cares-stimulus.html"><a href="solution-with-first-and-second-rounds-cares-stimulus.html#analyze-education-and-marriage-and-age-6"><i class="fa fa-check"></i><b>6.1.5</b> Analyze Education and Marriage and Age</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html"><i class="fa fa-check"></i><b>7</b> Household Life Cycle Distribution</a>
<ul>
<li class="chapter" data-level="7.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-grid-search"><i class="fa fa-check"></i><b>7.1</b> Distribution Grid Search</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main_grid_search-defaults-more-dense"><i class="fa fa-check"></i><b>7.1.1</b> Test SNW_DS_MAIN_GRID_SEARCH Defaults More Dense</a></li>
<li class="chapter" data-level="7.1.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results-more-dense"><i class="fa fa-check"></i><b>7.1.2</b> Show All Info in mp_dsvfi_results More Dense</a></li>
<li class="chapter" data-level="7.1.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#more-dense-param-results-define-frames"><i class="fa fa-check"></i><b>7.1.3</b> More Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="7.1.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-along-age-dimensions"><i class="fa fa-check"></i><b>7.1.4</b> Analyze Probability Mass Along Age Dimensions</a></li>
<li class="chapter" data-level="7.1.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-asset-and-shock-dimensions"><i class="fa fa-check"></i><b>7.1.5</b> Analyze Probability Mass Asset and Shock Dimensions</a></li>
<li class="chapter" data-level="7.1.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#probability-statistics-a-c-and-v-conditional-on-ages"><i class="fa fa-check"></i><b>7.1.6</b> Probability Statistics A, C and V Conditional on Ages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-exact-savings-choices"><i class="fa fa-check"></i><b>7.2</b> Distribution Exact Savings Choices</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main-defaults"><i class="fa fa-check"></i><b>7.2.1</b> Test SNW_DS_MAIN Defaults</a></li>
<li class="chapter" data-level="7.2.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results-more-dense-1"><i class="fa fa-check"></i><b>7.2.2</b> Show All Info in mp_dsvfi_results More Dense</a></li>
<li class="chapter" data-level="7.2.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#more-dense-param-results-define-frames-1"><i class="fa fa-check"></i><b>7.2.3</b> More Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="7.2.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-along-age-dimensions-1"><i class="fa fa-check"></i><b>7.2.4</b> Analyze Probability Mass Along Age Dimensions</a></li>
<li class="chapter" data-level="7.2.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#analyze-probability-mass-asset-and-shock-dimensions-1"><i class="fa fa-check"></i><b>7.2.5</b> Analyze Probability Mass Asset and Shock Dimensions</a></li>
<li class="chapter" data-level="7.2.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#probability-statistics-a-c-and-v-conditional-on-ages-1"><i class="fa fa-check"></i><b>7.2.6</b> Probability Statistics A, C and V Conditional on Ages</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-exact-savings-choices-vectorized"><i class="fa fa-check"></i><b>7.3</b> Distribution Exact Savings Choices Vectorized</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#test-snw_ds_main_vec"><i class="fa fa-check"></i><b>7.3.1</b> Test SNW_DS_MAIN_VEC</a></li>
<li class="chapter" data-level="7.3.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-all-info-in-mp_dsvfi_results"><i class="fa fa-check"></i><b>7.3.2</b> Show All Info in mp_dsvfi_results</a></li>
<li class="chapter" data-level="7.3.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#show-distribution-by-age"><i class="fa fa-check"></i><b>7.3.3</b> Show Distribution by Age</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#distribution-with-one-period-policy-shift"><i class="fa fa-check"></i><b>7.4</b> Distribution with One Period Policy Shift</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#one-period-deviation-from-steady-state-given-alternative-policy-function"><i class="fa fa-check"></i><b>7.4.1</b> One-period Deviation from Steady-State given Alternative Policy Function</a></li>
<li class="chapter" data-level="7.4.2" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-steady-state-policy-and-value-functions"><i class="fa fa-check"></i><b>7.4.2</b> Solve for "Steady-State" Policy and Value Functions</a></li>
<li class="chapter" data-level="7.4.3" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-steady-state-distribution"><i class="fa fa-check"></i><b>7.4.3</b> Solve for "Steady-State" Distribution</a></li>
<li class="chapter" data-level="7.4.4" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-policy-function-under-trump-stimulus"><i class="fa fa-check"></i><b>7.4.4</b> Solve for Policy Function Under Trump Stimulus</a></li>
<li class="chapter" data-level="7.4.5" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#solve-for-updated-distribution-given-trump-stimulus"><i class="fa fa-check"></i><b>7.4.5</b> Solve for Updated Distribution given Trump Stimulus</a></li>
<li class="chapter" data-level="7.4.6" data-path="household-life-cycle-distribution.html"><a href="household-life-cycle-distribution.html#debug-check-snw_ds_main_vec-with-steady-state-policies"><i class="fa fa-check"></i><b>7.4.6</b> Debug Check, SNW_DS_MAIN_VEC with Steady State Policies</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="value-of-each-check.html"><a href="value-of-each-check.html"><i class="fa fa-check"></i><b>8</b> Value of Each Check</a>
<ul>
<li class="chapter" data-level="8.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#v-and-c-without-unemployment"><i class="fa fa-check"></i><b>8.1</b> 2020 V and C without Unemployment</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#test-snw_a4chk_wrk_bisec_vec-defaults-dense"><i class="fa fa-check"></i><b>8.1.1</b> Test SNW_A4CHK_WRK_BISEC_VEC Defaults Dense</a></li>
<li class="chapter" data-level="8.1.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#dense-param-results-define-frames"><i class="fa fa-check"></i><b>8.1.2</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="8.1.3" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-difference-in-v-and-c-with-check"><i class="fa fa-check"></i><b>8.1.3</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="8.1.4" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-kids-and-marriage-and-age-7"><i class="fa fa-check"></i><b>8.1.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="8.1.5" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-education-and-marriage"><i class="fa fa-check"></i><b>8.1.5</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#v-and-c-with-unemployment"><i class="fa fa-check"></i><b>8.2</b> 2020 V and C with Unemployment</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="value-of-each-check.html"><a href="value-of-each-check.html#test-snw_a4chk_unemp_bisec_vec-defaults"><i class="fa fa-check"></i><b>8.2.1</b> Test SNW_A4CHK_UNEMP_BISEC_VEC Defaults</a></li>
<li class="chapter" data-level="8.2.2" data-path="value-of-each-check.html"><a href="value-of-each-check.html#dense-param-results-define-frames-1"><i class="fa fa-check"></i><b>8.2.2</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="8.2.3" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-difference-in-v-and-c-with-check-1"><i class="fa fa-check"></i><b>8.2.3</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="8.2.4" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-kids-and-marriage-and-age-8"><i class="fa fa-check"></i><b>8.2.4</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="8.2.5" data-path="value-of-each-check.html"><a href="value-of-each-check.html#analyze-education-and-marriage-1"><i class="fa fa-check"></i><b>8.2.5</b> Analyze Education and Marriage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html"><i class="fa fa-check"></i><b>9</b> 2019/2020 and 2007/2008 V and C Full State Space</a>
<ul>
<li class="chapter" data-level="9.1" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#full-states-ev-and-ec-of-one-check"><i class="fa fa-check"></i><b>9.1</b> 2020 Full States EV and EC of One Check</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#test-snw_evuvw20_jaeemk-defaults"><i class="fa fa-check"></i><b>9.1.1</b> Test SNW_EVUVW20_JAEEMK Defaults</a></li>
<li class="chapter" data-level="9.1.2" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#precompute"><i class="fa fa-check"></i><b>9.1.2</b> Precompute</a></li>
<li class="chapter" data-level="9.1.3" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#solve-for-2020-evuvw-with-0-and-2-checks"><i class="fa fa-check"></i><b>9.1.3</b> Solve for 2020 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.1.4" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#param-results-define-frames"><i class="fa fa-check"></i><b>9.1.4</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.1.5" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-difference-in-v-and-c-with-check-2"><i class="fa fa-check"></i><b>9.1.5</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.1.6" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education"><i class="fa fa-check"></i><b>9.1.6</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.1.7" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education"><i class="fa fa-check"></i><b>9.1.7</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.1.8" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education"><i class="fa fa-check"></i><b>9.1.8</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.1.9" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-kids-and-marriage-and-age-9"><i class="fa fa-check"></i><b>9.1.9</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.1.10" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-education-and-marriage-2"><i class="fa fa-check"></i><b>9.1.10</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#bidentrump-checks-full-states-ev-and-ec-of-two-checks"><i class="fa fa-check"></i><b>9.2</b> 2019 (Biden/Trump Checks) Full States EV and EC of Two Checks</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#test-snw_evuvw19_jaeemk-defaults-for-2019"><i class="fa fa-check"></i><b>9.2.1</b> Test SNW_EVUVW19_JAEEMK Defaults for 2019</a></li>
<li class="chapter" data-level="9.2.2" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#solve-for-2019-evuvw-with-0-and-2-checks"><i class="fa fa-check"></i><b>9.2.2</b> Solve for 2019 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.2.3" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#param-results-define-frames-1"><i class="fa fa-check"></i><b>9.2.3</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.2.4" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-difference-in-v-and-c-with-check-3"><i class="fa fa-check"></i><b>9.2.4</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.2.5" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-1"><i class="fa fa-check"></i><b>9.2.5</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.2.6" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education-1"><i class="fa fa-check"></i><b>9.2.6</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.2.7" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education-1"><i class="fa fa-check"></i><b>9.2.7</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.2.8" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-kids-and-marriage-and-age-10"><i class="fa fa-check"></i><b>9.2.8</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.2.9" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-education-and-marriage-3"><i class="fa fa-check"></i><b>9.2.9</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#value-and-optimal-savings-and-consumption-given-stimulus"><i class="fa fa-check"></i><b>9.3</b> 2008 Value and Optimal Savings and Consumption Given Stimulus</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#solve-2008-value-and-policy-function-with-snw_v08p08_jaeemk"><i class="fa fa-check"></i><b>9.3.1</b> Solve 2008 Value and Policy Function with SNW_V08p08_JAEEMK</a></li>
<li class="chapter" data-level="9.3.2" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#solve-for-2008-value-and-consumption-with-0-and-2-checks"><i class="fa fa-check"></i><b>9.3.2</b> Solve for 2008 Value and Consumption with 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.3.3" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#param-results-define-frames-2"><i class="fa fa-check"></i><b>9.3.3</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.3.4" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-difference-in-v-and-c-with-check-4"><i class="fa fa-check"></i><b>9.3.4</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.3.5" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-2"><i class="fa fa-check"></i><b>9.3.5</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.3.6" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education-2"><i class="fa fa-check"></i><b>9.3.6</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.3.7" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education-2"><i class="fa fa-check"></i><b>9.3.7</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.3.8" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-kids-and-marriage-and-age-11"><i class="fa fa-check"></i><b>9.3.8</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.3.9" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-education-and-marriage-4"><i class="fa fa-check"></i><b>9.3.9</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#bush-2008-stimulus-full-states-ev-and-ec-of-two-checks"><i class="fa fa-check"></i><b>9.4</b> 2007 (Bush 2008 Stimulus) Full States EV and EC of Two Checks</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#test-snw_evuvw19_jaeemk-defaults-for-2019-1"><i class="fa fa-check"></i><b>9.4.1</b> Test SNW_EVUVW19_JAEEMK Defaults for 2019</a></li>
<li class="chapter" data-level="9.4.2" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#solve-for-2019-evuvw-with-0-and-2-checks-1"><i class="fa fa-check"></i><b>9.4.2</b> Solve for 2019 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="9.4.3" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#param-results-define-frames-3"><i class="fa fa-check"></i><b>9.4.3</b> Param Results Define Frames</a></li>
<li class="chapter" data-level="9.4.4" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-difference-in-v-and-c-with-check-5"><i class="fa fa-check"></i><b>9.4.4</b> Analyze Difference in V and C with Check</a></li>
<li class="chapter" data-level="9.4.5" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-3"><i class="fa fa-check"></i><b>9.4.5</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
<li class="chapter" data-level="9.4.6" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-value-gains-color-as-shock-conditional-on-age-marital-kids-and-education-3"><i class="fa fa-check"></i><b>9.4.6</b> Marginal Value Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.4.7" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#marginal-consumption-gains-color-as-shock-conditional-on-age-marital-kids-and-education-3"><i class="fa fa-check"></i><b>9.4.7</b> Marginal Consumption Gains, Color as Shock, Conditional on Age, Marital, Kids, and Education</a></li>
<li class="chapter" data-level="9.4.8" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-kids-and-marriage-and-age-12"><i class="fa fa-check"></i><b>9.4.8</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="9.4.9" data-path="and-20072008-v-and-c-full-state-space.html"><a href="and-20072008-v-and-c-full-state-space.html#analyze-education-and-marriage-5"><i class="fa fa-check"></i><b>9.4.9</b> Analyze Education and Marriage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html"><i class="fa fa-check"></i><b>10</b> 2019 Expectations Given Income, Age, Kids and Marital Status</a>
<ul>
<li class="chapter" data-level="10.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#age-income-kids-marry-ev-and-ec-of-one-check"><i class="fa fa-check"></i><b>10.1</b> 2019 Age, Income, Kids, Marry EV and EC of One Check</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#test-snw_evuvw19_jmky-defaults-dense"><i class="fa fa-check"></i><b>10.1.1</b> Test SNW_EVUVW19_JMKY Defaults Dense</a></li>
<li class="chapter" data-level="10.1.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#solve-vfi-and-distributon"><i class="fa fa-check"></i><b>10.1.2</b> Solve VFI and Distributon</a></li>
<li class="chapter" data-level="10.1.3" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#pre-compute-matrixes-and-ymky-mass"><i class="fa fa-check"></i><b>10.1.3</b> Pre-Compute Matrixes and YMKY Mass</a></li>
<li class="chapter" data-level="10.1.4" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#solve-for-2019-evuvw-with-0-and-2-checks-2"><i class="fa fa-check"></i><b>10.1.4</b> Solve for 2019 Evuvw With 0 and 2 Checks</a></li>
<li class="chapter" data-level="10.1.5" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#dense-param-results-define-frames-2"><i class="fa fa-check"></i><b>10.1.5</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="10.1.6" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#analyze-marginal-value-and-mpc-over-yaeta-conditional-on-kids-marry-age-education-4"><i class="fa fa-check"></i><b>10.1.6</b> Analyze Marginal Value and MPC over Y(a,eta), Conditional On Kids, Marry, Age, Education</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#age-income-kids-marry-ev-and-ec-all-checks-biden-checks"><i class="fa fa-check"></i><b>10.2</b> 2019/2020 Age, Income, Kids, Marry EV and EC All Checks (Biden Checks)</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#test-snw_evuvw19_jmky_allchecks-parameters-for-biden-checks"><i class="fa fa-check"></i><b>10.2.1</b> Test SNW_EVUVW19_JMKY_ALLCHECKS Parameters for Biden Checks</a></li>
<li class="chapter" data-level="10.2.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#snw_evuvw19_jmky_allchecks-low-storage-invoke-for-biden-checks"><i class="fa fa-check"></i><b>10.2.2</b> SNW_EVUVW19_JMKY_ALLCHECKS Low Storage Invoke for Biden Checks</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#age-income-kids-marry-ev-and-ec-all-checks-bush-checks"><i class="fa fa-check"></i><b>10.3</b> 2007 Age, Income, Kids, Marry EV and EC All Checks (Bush Checks)</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#test-snw_evuvw19_jmky_allchecks-parameters-for-bush-checks"><i class="fa fa-check"></i><b>10.3.1</b> Test SNW_EVUVW19_JMKY_ALLCHECKS Parameters for Bush Checks</a></li>
<li class="chapter" data-level="10.3.2" data-path="expectations-given-income-age-kids-and-marital-status.html"><a href="expectations-given-income-age-kids-and-marital-status.html#snw_evuvw19_jmky_allchecks-low-storage-invoke-for-bush-checks"><i class="fa fa-check"></i><b>10.3.2</b> SNW_EVUVW19_JMKY_ALLCHECKS Low Storage Invoke for Bush Checks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html"><i class="fa fa-check"></i><b>11</b> Taxes and Stimulus</a>
<ul>
<li class="chapter" data-level="11.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#compute-for-equilibrium-tax"><i class="fa fa-check"></i><b>11.1</b> Compute for Equilibrium Tax</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#parameter-controls"><i class="fa fa-check"></i><b>11.1.1</b> Parameter Controls</a></li>
<li class="chapter" data-level="11.1.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#solve-for-new-tax-rate"><i class="fa fa-check"></i><b>11.1.2</b> Solve for New Tax Rate</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#existing-stimulus-as-a-function-of-income-and-family-status"><i class="fa fa-check"></i><b>11.2</b> Existing Stimulus as a Function of Income and Family Status</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#trump-stimulus-checks-for-unmarried-households"><i class="fa fa-check"></i><b>11.2.1</b> Trump Stimulus Checks for Unmarried Households</a></li>
<li class="chapter" data-level="11.2.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#trump-stimulus-checks-for-married-households"><i class="fa fa-check"></i><b>11.2.2</b> Trump Stimulus Checks for Married Households</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#existing-stimulus-as-a-function-of-income-and-family-status-1"><i class="fa fa-check"></i><b>11.3</b> Existing Stimulus as a Function of Income and Family Status</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#biden-stimulus-checks-for-unmarried-households"><i class="fa fa-check"></i><b>11.3.1</b> Biden Stimulus Checks for Unmarried Households</a></li>
<li class="chapter" data-level="11.3.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#biden-stimulus-checks-for-married-households"><i class="fa fa-check"></i><b>11.3.2</b> Biden Stimulus Checks for Married Households</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#taxable-income-and-tax-liabilities-in-2008"><i class="fa fa-check"></i><b>11.4</b> Taxable Income and Tax Liabilities in 2008</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#taxable-income-and-tax-liabilities-in-2008-for-4-income-levels"><i class="fa fa-check"></i><b>11.4.1</b> Taxable Income and Tax Liabilities in 2008 for 4 Income Levels</a></li>
<li class="chapter" data-level="11.4.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#taxable-income-and-tax-liabilities-in-2008-for-50-income-levels"><i class="fa fa-check"></i><b>11.4.2</b> Taxable Income and Tax Liabilities in 2008 for 50 Income Levels</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#bush-2008-stimulus-as-a-function-of-income-and-family-status"><i class="fa fa-check"></i><b>11.5</b> Bush 2008 Stimulus as a Function of Income and Family Status</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#bush-stimulus-checks-for-unmarried-households"><i class="fa fa-check"></i><b>11.5.1</b> Bush Stimulus Checks for Unmarried Households</a></li>
<li class="chapter" data-level="11.5.2" data-path="taxes-and-stimulus.html"><a href="taxes-and-stimulus.html#bush-stimulus-checks-for-married-households"><i class="fa fa-check"></i><b>11.5.2</b> Bush Stimulus Checks for Married Households</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="calibration.html"><a href="calibration.html"><i class="fa fa-check"></i><b>12</b> Calibration</a>
<ul>
<li class="chapter" data-level="12.1" data-path="calibration.html"><a href="calibration.html#model-calibration"><i class="fa fa-check"></i><b>12.1</b> Model Calibration</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="calibration.html"><a href="calibration.html#calibrate-parameter-controls-for-snw-functions"><i class="fa fa-check"></i><b>12.1.1</b> Calibrate Parameter Controls for SNW Functions</a></li>
<li class="chapter" data-level="12.1.2" data-path="calibration.html"><a href="calibration.html#calibrate-routine"><i class="fa fa-check"></i><b>12.1.2</b> Calibrate Routine</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="calibration.html"><a href="calibration.html#model-lockdown-calibration"><i class="fa fa-check"></i><b>12.2</b> Model Lockdown Calibration</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="calibration.html"><a href="calibration.html#lock-down-impact-on-consumption"><i class="fa fa-check"></i><b>12.2.1</b> Lock Down Impact on Consumption</a></li>
<li class="chapter" data-level="12.2.2" data-path="calibration.html"><a href="calibration.html#graphical-illustraiton-for-gamma2-docdense-and-gamma1-dense"><i class="fa fa-check"></i><b>12.2.2</b> Graphical Illustraiton for Gamma=2 (docdense) and Gamma=1 (dense)</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="calibration.html"><a href="calibration.html#ui-benefit-unemployment-lost-wage-recovery-parameter-b-calibration"><i class="fa fa-check"></i><b>12.3</b> UI Benefit Unemployment Lost Wage Recovery Parameter b Calibration</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="calibration.html"><a href="calibration.html#calibrate-b-with-2.1-ui-benefits-to-wages-ratio-and-xi-0.532"><i class="fa fa-check"></i><b>12.3.1</b> Calibrate b with 2.1% UI Benefits to Wages Ratio and <span class="math inline">\(\xi =0.532\)</span></a></li>
<li class="chapter" data-level="12.3.2" data-path="calibration.html"><a href="calibration.html#calibrate-b-with-5.68-ui-benefits-to-wages-ratio-and-xi-0.651"><i class="fa fa-check"></i><b>12.3.2</b> Calibrate b with 5.68% UI Benefits to Wages Ratio and <span class="math inline">\(\xi =0.651\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>13</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="13.1" data-path="summary-statistics.html"><a href="summary-statistics.html#full-states-mpc-and-distributional-statistics-by-marital-kids-and-income-groups."><i class="fa fa-check"></i><b>13.1</b> 2019 Full States MPC and Distributional Statistics by Marital, Kids, and Income Groups.</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="summary-statistics.html"><a href="summary-statistics.html#test-snw_evuvw19_jaeemk-defaults-dense"><i class="fa fa-check"></i><b>13.1.1</b> Test SNW_EVUVW19_JAEEMK Defaults Dense</a></li>
<li class="chapter" data-level="13.1.2" data-path="summary-statistics.html"><a href="summary-statistics.html#solve-for-2019-evuvw-with-0-and-1-checks"><i class="fa fa-check"></i><b>13.1.2</b> Solve for 2019 Evuvw With 0 and 1 Checks</a></li>
<li class="chapter" data-level="13.1.3" data-path="summary-statistics.html"><a href="summary-statistics.html#additional-variables"><i class="fa fa-check"></i><b>13.1.3</b> Additional Variables</a></li>
<li class="chapter" data-level="13.1.4" data-path="summary-statistics.html"><a href="summary-statistics.html#adjust-to-probability-mass-function"><i class="fa fa-check"></i><b>13.1.4</b> Adjust to Probability Mass Function</a></li>
<li class="chapter" data-level="13.1.5" data-path="summary-statistics.html"><a href="summary-statistics.html#age-bounds"><i class="fa fa-check"></i><b>13.1.5</b> Age Bounds</a></li>
<li class="chapter" data-level="13.1.6" data-path="summary-statistics.html"><a href="summary-statistics.html#scale-statistics-to-thousands-of-dollars"><i class="fa fa-check"></i><b>13.1.6</b> Scale Statistics to Thousands of Dollars</a></li>
<li class="chapter" data-level="13.1.7" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-overall-all-ages"><i class="fa fa-check"></i><b>13.1.7</b> Distributional Statistics Overall All Ages</a></li>
<li class="chapter" data-level="13.1.8" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-overall-18-to-64"><i class="fa fa-check"></i><b>13.1.8</b> Distributional Statistics Overall 18 to 64</a></li>
<li class="chapter" data-level="13.1.9" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-kids-count"><i class="fa fa-check"></i><b>13.1.9</b> Distributional Statistics By Kids Count</a></li>
<li class="chapter" data-level="13.1.10" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-marital-status-and-kids-count"><i class="fa fa-check"></i><b>13.1.10</b> Distributional Statistics By Marital Status and Kids Count</a></li>
<li class="chapter" data-level="13.1.11" data-path="summary-statistics.html"><a href="summary-statistics.html#distributional-statistics-by-marital-status-kids-count-and-income-bins"><i class="fa fa-check"></i><b>13.1.11</b> Distributional Statistics By Marital Status, Kids Count and Income Bins</a></li>
<li class="chapter" data-level="13.1.12" data-path="summary-statistics.html"><a href="summary-statistics.html#store-aggregate-to-file"><i class="fa fa-check"></i><b>13.1.12</b> Store Aggregate To File</a></li>
<li class="chapter" data-level="13.1.13" data-path="summary-statistics.html"><a href="summary-statistics.html#store-key-stats-to-compare-to-key-us-distributional-statistics"><i class="fa fa-check"></i><b>13.1.13</b> Store Key Stats to Compare to Key US Distributional Statistics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html"><i class="fa fa-check"></i><b>14</b> Selected Comparative Statistics</a>
<ul>
<li class="chapter" data-level="14.1" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#value-and-consumption-low-vs-higher-interest-rates-results-comparison"><i class="fa fa-check"></i><b>14.1</b> Value and Consumption Low vs Higher Interest Rates Results Comparison</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-model-at-4-percent-interest-rate"><i class="fa fa-check"></i><b>14.1.1</b> Solve Model at 4 Percent Interest Rate</a></li>
<li class="chapter" data-level="14.1.2" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-model-at-2-percent-interest-rate"><i class="fa fa-check"></i><b>14.1.2</b> Solve Model at 2 Percent Interest Rate</a></li>
<li class="chapter" data-level="14.1.3" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#generate-interest-rate-comparison-matrixes"><i class="fa fa-check"></i><b>14.1.3</b> Generate Interest Rate Comparison Matrixes</a></li>
<li class="chapter" data-level="14.1.4" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#dense-param-results-define-frames-3"><i class="fa fa-check"></i><b>14.1.4</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="14.1.5" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-difference-in-v-and-c-with-higher-and-lower-savings-interest-rate"><i class="fa fa-check"></i><b>14.1.5</b> Analyze Difference in V and C with Higher and Lower Savings Interest Rate</a></li>
<li class="chapter" data-level="14.1.6" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-kids-and-marriage-and-age-13"><i class="fa fa-check"></i><b>14.1.6</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="14.1.7" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-education-and-marriage-6"><i class="fa fa-check"></i><b>14.1.7</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#value-and-consumption-low-vs-higher-unemployment-insurance-comparison"><i class="fa fa-check"></i><b>14.2</b> Value and Consumption Low vs Higher Unemployment Insurance Comparison</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-the-steady-state-non-unemployment-problem"><i class="fa fa-check"></i><b>14.2.1</b> Solve the Steady-State non-unemployment Problem</a></li>
<li class="chapter" data-level="14.2.2" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-problem-in-mit-unemployed-state-with-high-and-low-unemployment-insurance"><i class="fa fa-check"></i><b>14.2.2</b> Solve Problem in MIT Unemployed State with High and Low Unemployment Insurance</a></li>
<li class="chapter" data-level="14.2.3" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#generate-ui-comparison-matrixes"><i class="fa fa-check"></i><b>14.2.3</b> Generate UI Comparison Matrixes</a></li>
<li class="chapter" data-level="14.2.4" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#dense-param-results-define-frames-4"><i class="fa fa-check"></i><b>14.2.4</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="14.2.5" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-difference-in-v-and-c-with-higher-and-lower-ui"><i class="fa fa-check"></i><b>14.2.5</b> Analyze Difference in V and C with Higher and Lower UI</a></li>
<li class="chapter" data-level="14.2.6" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-kids-and-marriage-and-age-14"><i class="fa fa-check"></i><b>14.2.6</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="14.2.7" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-education-and-marriage-7"><i class="fa fa-check"></i><b>14.2.7</b> Analyze Education and Marriage</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#value-and-consumption-low-vs-higher-discount-factor-comparison"><i class="fa fa-check"></i><b>14.3</b> Value and Consumption Low vs Higher Discount Factor Comparison</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-model-at-beta-0.95"><i class="fa fa-check"></i><b>14.3.1</b> Solve Model at <span class="math inline">\(\beta =0.95\)</span></a></li>
<li class="chapter" data-level="14.3.2" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#solve-model-at-beta-0.60"><i class="fa fa-check"></i><b>14.3.2</b> Solve Model at <span class="math inline">\(\beta =0.60\)</span></a></li>
<li class="chapter" data-level="14.3.3" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#generate-beta-comparison-matrixes"><i class="fa fa-check"></i><b>14.3.3</b> Generate <span class="math inline">\(\beta\)</span> Comparison Matrixes</a></li>
<li class="chapter" data-level="14.3.4" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#dense-param-results-define-frames-5"><i class="fa fa-check"></i><b>14.3.4</b> Dense Param Results Define Frames</a></li>
<li class="chapter" data-level="14.3.5" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-difference-in-v-and-c-with-higher-and-lower-beta"><i class="fa fa-check"></i><b>14.3.5</b> Analyze Difference in V and C with Higher and Lower <span class="math inline">\(\beta\)</span></a></li>
<li class="chapter" data-level="14.3.6" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-kids-and-marriage-and-age-15"><i class="fa fa-check"></i><b>14.3.6</b> Analyze Kids and Marriage and Age</a></li>
<li class="chapter" data-level="14.3.7" data-path="selected-comparative-statistics.html"><a href="selected-comparative-statistics.html#analyze-education-and-marriage-8"><i class="fa fa-check"></i><b>14.3.7</b> Analyze Education and Marriage</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#selected-comparative-statistics-linksselected-comparative-statistics-links"><i class="fa fa-check"></i><b>A.1</b> <span>## Selected Comparative Statistics links</span> links</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/PrjOptiSNW/bookdown/index.html" target="blank">PrjOptiSNW Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NSW Dynamic Life Cycle and Stimulus Checks Code Companion</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="alternative-value-function-solution-testing" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Alternative Value Function Solution Testing</h1>

<div id="small-test-exact-solution-looped-minimizer" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Small Test Exact Solution Looped Minimizer</h2>
<div class="par">
<div class="flushleft">
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/blob/master/PrjOptiSNW/svalpol/snw_vfi_main.m"><strong>snw_vfi_main</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function fully iteratively using matlab minimizer.
Small Solution Analysis.This produces the same result as
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a><strong>,</strong>
except slower. The purpose of this function is to confirm that the
results from
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
is correct.</p>
</div>
</div>
<div id="test-snw_vfi_main-defaults-small" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<div class="par">
<div class="flushleft">
<p>Call the function with defaults parameters.</p>
</div>
</div>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main(mp_param);

SNW_VFI_MAIN: Finished Age Group:18 of 18
SNW_VFI_MAIN: Finished Age Group:17 of 18
SNW_VFI_MAIN: Finished Age Group:16 of 18
SNW_VFI_MAIN: Finished Age Group:15 of 18
SNW_VFI_MAIN: Finished Age Group:14 of 18
SNW_VFI_MAIN: Finished Age Group:13 of 18
SNW_VFI_MAIN: Finished Age Group:12 of 18
SNW_VFI_MAIN: Finished Age Group:11 of 18
SNW_VFI_MAIN: Finished Age Group:10 of 18
SNW_VFI_MAIN: Finished Age Group:9 of 18
SNW_VFI_MAIN: Finished Age Group:8 of 18
SNW_VFI_MAIN: Finished Age Group:7 of 18
SNW_VFI_MAIN: Finished Age Group:6 of 18
SNW_VFI_MAIN: Finished Age Group:5 of 18
SNW_VFI_MAIN: Finished Age Group:4 of 18
SNW_VFI_MAIN: Finished Age Group:3 of 18
SNW_VFI_MAIN: Finished Age Group:2 of 18
SNW_VFI_MAIN: Finished Age Group:1 of 18
Elapsed time is 515.239525 seconds.
Completed SNW_VFI_MAIN;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base</code></pre>
</div>
<div id="small-param-results-define-frames" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Small Param Results Define Frames</h3>
<div class="par">
<div class="flushleft">
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
</div>
</div>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;eta&#39;, 1:length(eta_H_grid)});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-1" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Analyze Savings and Shocks</h3>
<div class="par">
<div class="flushleft">
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies along savings and shocks:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0      -17.721       -9.4697       -4.6571       -1.7924      -0.23581 
      2      0.0097656      -17.284       -9.3219       -4.5706       -1.7215      -0.16909 
      3       0.078125      -15.196       -8.4993       -4.1004       -1.3514       0.17326 
      4        0.26367      -11.907       -7.0394       -3.3075      -0.78441       0.67194 
      5          0.625      -8.4194       -5.2786       -2.3615      -0.19487        1.1461 
      6         1.2207       -5.393       -3.5129       -1.3918       0.35026        1.5392 
      7         2.1094      -3.0352       -1.9483      -0.50577       0.84352        1.8533 
      8         3.3496      -1.2918      -0.66899       0.26902        1.2874        2.1081 
      9              5    -0.030416       0.32906       0.92609        1.6707        2.3215 
     10         7.1191      0.87699        1.0879        1.4656        1.9934        2.5052 
     11         9.7656       1.5329        1.6594        1.8992         2.267        2.6661 
     12         12.998       2.0119        2.0896        2.2435        2.4983        2.8056 
     13         16.875        2.366        2.4149        2.5152        2.6918        2.9253 
     14         21.455       2.6312        2.6629        2.7294        2.8524        3.0281 
     15         26.797       2.8329        2.8539        2.8987        2.9852        3.1169 
     16         32.959       2.9883        3.0025        3.0334        3.0948        3.1935 
     17             40       3.1097        3.1195        3.1411        3.1853        3.2595 
     18         47.979       3.2056        3.2125        3.2279        3.2601        3.3161 
     19         56.953       3.2822        3.2872        3.2984         3.322        3.3647 
     20         66.982       3.3441        3.3478         3.356        3.3736        3.4063 
     21         78.125       3.3947        3.3974        3.4035        3.4168         3.442 
     22         90.439       3.4363        3.4383        3.4429        3.4531        3.4727 
     23         103.98       3.4708        3.4724        3.4759        3.4837        3.4991 
     24         118.82       3.4997        3.5009        3.5036        3.5097        3.5218 
     25            135       3.5241         3.525        3.5271        3.5319        3.5415 

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0    3.2168e-05    0.0034996      0.049878      0.24382       0.89299  
      2      0.0097656    0.00055444    0.0053208      0.053281      0.24787       0.89865  
      3       0.078125      0.021863     0.029684      0.083029      0.28062       0.93971  
      4        0.26367       0.13322      0.14773       0.20012       0.3888        1.0591  
      5          0.625       0.39134      0.41043       0.45332      0.64573        1.3087  
      6         1.2207       0.84131      0.86393       0.91226       1.0928         1.745  
      7         2.1094        1.5303       1.5542        1.6156       1.7559        2.3963  
      8         3.3496        2.4876       2.5118         2.573       2.6876        3.3398  
      9              5        3.7642       3.7887        3.8498       3.9922         4.592  
     10         7.1191        5.4275       5.4525        5.5145       5.6929        6.1933  
     11         9.7656        7.4794       7.5043        7.5679       7.7532        8.1877  
     12         12.998        9.9124       9.9329        9.9956       10.186        10.627  
     13         16.875        12.928        12.95        13.005       13.196        13.715  
     14         21.455        16.529       16.548        16.604       16.783        17.374  
     15         26.797        20.601       20.618        20.668       20.837        21.462  
     16         32.959        25.307       25.325         25.37       25.525        26.151  
     17             40        30.667        30.69        30.742       30.886        31.487  
     18         47.979        36.761       36.782        36.841       36.999        37.562  
     19         56.953        43.773       43.795        43.847       44.012         44.56  
     20         66.982        51.605       51.628        51.688        51.85        52.403  
     21         78.125        59.955       59.978        60.038       60.211        60.768  
     22         90.439        69.267        69.29        69.352       69.528        70.097  
     23         103.98        79.753       79.774        79.834       80.008        80.586  
     24         118.82        91.116        91.14        91.201       91.367        91.942  
     25            135        103.47       103.49        103.55       103.72        104.29  

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5
    _____    _________    __________    __________    __________    __________    __________

      1              0     0.30273       0.43104       0.68779        1.2165        2.3367  
      2      0.0097656     0.31374       0.44069       0.69581        1.2239        2.3424  
      3       0.078125     0.37308       0.49662       0.74605        1.2709        2.3811  
      4        0.26367     0.48039       0.59638         0.846        1.3793         2.478  
      5          0.625     0.64735       0.75736        1.0152        1.5439        2.6496  
      6         1.2207     0.89648        1.0013        1.2519        1.7913        2.9071  
      7         2.1094      1.2479        1.3498        1.5854        2.1634        3.2903  
      8         3.3496      1.7393        1.8394        2.0734        2.6754        3.7896  
      9              5      2.3872        2.4859        2.7182        3.2909        4.4564  
     10         7.1191      3.1917         3.289        3.5191        4.0542        5.3181  
     11         9.7656      4.2188        4.3155         4.543          5.07        6.3986  
     12         12.998      5.5439        5.6447        5.8722        6.3933        7.7142  
     13         16.875      7.0334         7.133        7.3676        7.8866        9.1285  
     14         21.455       8.754        8.8551        9.0887        9.6188        10.789  
     15         26.797      10.886        10.989        11.228        11.768        12.903  
     16         32.959      13.336        13.438        13.682        14.235        15.368  
     17             40      16.151        16.249        16.485        17.049        18.207  
     18         47.979      19.321         19.42        19.649          20.2        21.394  
     19         56.953      22.728        22.827        23.062        23.605        24.816  
     20         66.982      26.539        26.636        26.864         27.41        28.615  
     21         78.125      31.124        31.221         31.45        31.985        33.186  
     22         90.439      36.108        36.205        36.431        36.963        38.152  
     23         103.98      41.345        41.444        41.673        42.206        43.386  
     24         118.82      47.202        47.298        47.525        48.066        49.248  
     25            135      53.632        53.731        53.962        54.496        55.685  </code></pre>

</div>
</div>
<div id="small-test-grid-search-solution" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Small Test Grid Search Solution</h2>
<div class="par">
<div class="flushleft">
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_grid_search.m"><strong>snw_vfi_main_grid_search</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function using grid search. Small Solution Analysis.
Small Solution Analysis, husband 5 shocks, wife 1 shocks.</p>
</div>
</div>
<div id="test-snw_vfi_main_grid_search-defaults-small" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Test SNW_VFI_MAIN_GRID_SEARCH Defaults Small</h3>
<div class="par">
<div class="flushleft">
<p>Call the function with defaults parameters.</p>
</div>
</div>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_grid_search(mp_param);

SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:18 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:17 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:16 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:15 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:14 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:13 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:12 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:11 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:10 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:9 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:8 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:7 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:6 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:5 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:4 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:3 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:2 of 18
SNW_VFI_MAIN_GRID_SEARCH: Finished Age Group:1 of 18
Elapsed time is 6.771761 seconds.
Completed SNW_VFI_MAIN_GRID_SEARCH;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base</code></pre>
</div>
<div id="small-param-results-define-frames-1" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Small Param Results Define Frames</h3>
<div class="par">
<div class="flushleft">
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
</div>
</div>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;Hshock&#39;, eta_H_grid});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-2" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Analyze Savings and Shocks</h3>
<div class="par">
<div class="flushleft">
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies along savings and shocks:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          -17.723                 -9.4806             -4.7079             -1.8282                -0.2506     
      2      0.0097656          -17.287                 -9.3335             -4.6223             -1.7575               -0.18381     
      3       0.078125          -15.289                 -8.5102             -4.1607             -1.3897                0.15884     
      4        0.26367          -12.169                 -7.0906             -3.3823            -0.82837                0.65605     
      5          0.625          -8.7667                 -5.3975             -2.4071            -0.24676                 1.1271     
      6         1.2207          -5.7445                 -3.6744             -1.4216             0.29453                 1.5213     
      7         2.1094          -3.3257                  -2.112            -0.53821             0.80697                 1.8359     
      8         3.3496          -1.5195                -0.81731             0.22515              1.2742                 2.0887     
      9              5         -0.20516                 0.20391             0.87016              1.6615                 2.3015     
     10         7.1191          0.74607                 0.98431              1.4069              1.9813                 2.4914     
     11         9.7656           1.4347                  1.5779              1.8454              2.2495                 2.6581     
     12         12.998           1.9367                  2.0246              2.1961              2.4767                    2.8     
     13         16.875           2.3099                   2.364               2.476              2.6699                 2.9198     
     14         21.455           2.5887                  2.6239              2.6967              2.8321                 3.0216     
     15         26.797           2.7998                  2.8231              2.8727              2.9673                 3.1096     
     16         32.959            2.963                  2.9785              3.0123              3.0792                  3.186     
     17             40           3.0902                  3.1009              3.1242              3.1721                 3.2523     
     18         47.979           3.1902                  3.1978              3.2144              3.2489                 3.3096     
     19         56.953             3.27                  3.2754              3.2875              3.3128                 3.3588     
     20         66.982           3.3345                  3.3384              3.3471              3.3661                 3.4012     
     21         78.125           3.3871                  3.3899              3.3964              3.4105                 3.4375     
     22         90.439           3.4301                  3.4323              3.4372              3.4479                 3.4688     
     23         103.98           3.4658                  3.4674              3.4712              3.4794                 3.4957     
     24         118.82           3.4957                  3.4969              3.4998              3.5062                  3.519     
     25            135           3.5208                  3.5218               3.524              3.5289                 3.5391     

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0               1                  1.1435              1.5972              2.5926                  4.162      
      2      0.0097656          1.0463                   1.213              1.6574              2.6157                 4.1667      
      3       0.078125          1.8009                  2.0093              2.1991               2.875                 4.3056      
      4        0.26367          2.9491                  3.0648              3.2454              3.6204                 4.7315      
      5          0.625          4.0602                  4.1806              4.2546              4.5417                 5.4074      
      6         1.2207          5.1481                  5.2454              5.2731              5.4074                 6.0231      
      7         2.1094          6.1389                   6.213                6.25              6.2593                 6.7731      
      8         3.3496          7.0556                  7.1019              7.1713               7.162                 7.5648      
      9              5          7.9537                  7.9815              8.0556              8.0787                 8.3426      
     10         7.1191          8.8611                  8.8889              8.9398              9.0093                 9.0926      
     11         9.7656          9.7824                  9.7963              9.8519              9.9259                 9.9444      
     12         12.998          10.606                   10.63              10.648              10.731                 10.787      
     13         16.875          11.481                  11.491              11.537              11.597                 11.685      
     14         21.455          12.407                  12.407              12.431              12.491                 12.597      
     15         26.797          13.287                  13.301              13.306              13.356                 13.463      
     16         32.959           14.13                   14.13              14.167              14.199                 14.296      
     17             40          14.981                  14.981              14.991              15.032                 15.125      
     18         47.979           15.88                   15.88              15.884              15.921                 15.995      
     19         56.953           16.75                  16.773              16.782              16.796                  16.87      
     20         66.982          17.681                  17.685              17.699              17.722                 17.787      
     21         78.125          18.495                    18.5              18.509              18.551                 18.602      
     22         90.439          19.338                  19.338              19.352               19.37                 19.449      
     23         103.98           20.25                  20.264              20.269              20.278                 20.352      
     24         118.82          21.097                  21.097               21.13              21.144                 21.194      
     25            135          21.963                  21.968              21.977              21.995                 22.046      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          0.30277                0.43205              0.70498             1.2497                 2.3063      
      2      0.0097656          0.31384                0.44176              0.71311             1.2574                 2.3169      
      3       0.078125          0.38061                0.49936                0.768             1.3132                 2.3716      
      4        0.26367          0.50208                 0.6111              0.86902              1.423                  2.516      
      5          0.625          0.67677                0.76238               1.0363             1.5854                 2.6625      
      6         1.2207          0.89732                0.96685               1.2492             1.8485                 2.9934      
      7         2.1094           1.2189                 1.2789                1.543             2.2417                   3.35      
      8         3.3496           1.6892                 1.7561               1.9651             2.6933                 3.7969      
      9              5           2.3251                 2.4024               2.5736             3.2505                 4.4588      
     10         7.1191           3.1269                 3.1903               3.3745             3.9408                 5.4846      
     11         9.7656           4.0839                 4.1689               4.3128              4.829                 6.5432      
     12         12.998           5.4106                  5.457               5.6873             6.1291                 7.7117      
     13         16.875           6.9612                 7.0462               7.1563             7.6332                 9.0535      
     14         21.455           8.5924                 8.7131               8.8962             9.3301                 10.603      
     15         26.797             10.6                 10.647               10.911             11.348                 12.539      
     16         32.959           13.149                 13.269                13.33             13.839                 14.999      
     17             40           16.034                 16.154               16.378             16.792                 17.899      
     18         47.979           18.971                 19.092               19.343             19.756                 20.923      
     19         56.953           22.573                 22.485                22.69             23.274                 24.367      
     20         66.982           26.089                 26.168               26.322             26.797                 27.905      
     21         78.125           30.843                 30.917               31.101              31.36                 32.556      
     22         90.439           35.929                 36.049               36.177             36.667                 37.477      
     23         103.98           40.986                 40.918               41.144             41.731                 42.514      
     24         118.82           47.072                 47.192               47.018             47.525                 48.539      
     25            135           53.493                 53.538               53.682             54.096                 55.054      </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_0.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_1.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_2.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_3.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_4.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_5.png" width="500" /></p>
</div>
</div>
<div id="analyze-kids-and-marriage-and-age-1" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Analyze Kids and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0          1.402         1.6857          1.8728        1.9257          1.894         1.8046         1.6765          1.521         1.3445         1.1558          0.9567       0.71704       0.023702        0.12932         0.1935         0.2324            0.27        0.31342  
      2       2        0       -0.12483        0.36646          0.7436        0.9457         1.0402         1.0532         1.0089        0.92218        0.80354        0.66431         0.51986       0.30396       -0.48224       -0.32022       -0.20441       -0.12064       -0.046895       0.029025  
      3       3        0       -0.89708       -0.41863       -0.032067       0.18508        0.29597        0.33212        0.31608        0.26209        0.18086       0.082298       -0.023782      -0.21383        -1.1266        -0.8627       -0.64664       -0.47726        -0.33746        -0.1892  
      4       1        1          1.967         2.1822          2.3218        2.3638         2.3393         2.2644         2.1513         2.0064          1.832         1.6337          1.4095        1.1397        0.66739         0.6334        0.58559        0.54789         0.52562        0.51422  
      5       2        1        0.96762         1.2863          1.5349        1.6741          1.739         1.7415         1.6951         1.6078         1.4838          1.329          1.1418       0.90125        0.43962          0.438        0.42018        0.40748         0.40166        0.40636  
      6       3        1        0.51874         0.8123          1.0493        1.1855         1.2514         1.2646         1.2376         1.1769         1.0862        0.96852         0.81856       0.61623        0.17742        0.22234        0.24837        0.27222         0.29305        0.32582  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        12.948         12.924         13.052         13.152         13.224         13.264          13.26         13.144         13.036         12.944         12.848         12.716          11.76          11.48          10.98          10.22          8.98             1      
      2       2        0        12.924          12.88         13.008         13.096          13.16         13.108             13         12.916         12.828         12.768         12.708         12.532          11.68          11.32           10.8           9.96          8.78             1      
      3       3        0         12.86         12.848         12.972         13.084         13.108         13.024          12.94          12.86         12.792         12.736         12.692         12.516          11.64          11.32           10.8           9.98          8.82             1      
      4       1        1         12.86         12.856         12.972         13.076          13.14         13.184         13.156         13.048         12.948          12.84          12.78         12.728          11.76           11.4          10.88             10           8.8             1      
      5       2        1        12.876          12.82         12.956         13.028           13.1         13.124         13.012         12.888         12.784         12.696          12.68          12.58          11.64          11.32           10.7           9.92          8.64             1      
      6       3        1        12.804         12.784         12.912         12.984          13.06         13.036          12.92         12.812         12.716         12.644         12.644         12.524          11.66          11.28           10.7           9.92          8.64             1      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.6347         6.7441         6.9773         7.1425         7.2307         7.2843         7.9778          9.774          10.91         11.532         11.822         12.591         14.484         16.598         20.123         24.389         29.942          41.087   
      2       2        0        6.6476         6.7581         6.9904         7.1656         7.2723         8.8488         10.314         11.204         11.744         11.996          12.11         14.207         15.012         17.933         21.133         25.463         30.711          41.087   
      3       3        0        6.6679         6.7696         7.0001         7.1694         7.8468         9.5068         10.698         11.387         11.816         12.031         12.411         14.361         15.226         17.933         21.133          25.34         30.698          41.087   
      4       1        1         6.885         7.0096         7.2673         7.4584         7.5792         7.6332         8.5309         10.294         11.362          12.04         12.305         13.082         14.784         17.354         20.535         24.838         30.413          41.428   
      5       2        1         6.856          6.987         7.2319         7.4245         7.5481         7.8087         9.6961           11.1         11.855         12.287         12.414         13.963         15.314         17.886         21.524         25.522         31.072           41.43   
      6       3        1        6.8672         6.9855         7.2175         7.4148         7.5346         8.6883         10.344         11.392         12.015         12.358         12.399         14.136         15.326         18.258         21.536         25.535         31.085          41.443   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_6.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_7.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_8.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_9.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_10.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_11.png" width="500" /></p>
</div>
</div>
<div id="analyze-education-and-marriage-and-age-1" class="section level3" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Analyze Education and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0       -0.28978       0.072789        0.36537        0.53629        0.6243         0.64554        0.61621         0.548         0.45147        0.33899        0.22549       0.048783       -0.70881       -0.49468       -0.33241        -0.21328      -0.11371       -0.0092708 
      2       1       0        0.54315         1.0162         1.3575         1.5014        1.5291          1.4811         1.3848        1.2555          1.1011        0.92928        0.74303        0.48933       -0.34798       -0.20772       -0.10596       -0.030386      0.037469          0.11144 
      3       0       1        0.77529          1.038         1.2458         1.3693        1.4312          1.4402         1.4059        1.3343          1.2298         1.0982        0.93763        0.72438        0.29041        0.32237        0.33295         0.34258       0.35288          0.37357 
      4       1       1         1.5269         1.8159         2.0249         2.1129        2.1219          2.0734         1.9835        1.8598          1.7049         1.5227         1.3089         1.0471        0.56587        0.54012        0.50314         0.47581       0.46067          0.45737 

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        12.989         12.979         13.035         13.093         13.131         13.077         13.019         12.931         12.845         12.784         12.688         12.517         11.693         11.373         10.867         10.067           8.88            1      
      2       1       0        12.832         12.789         12.987         13.128         13.197         13.187         13.115         13.016         12.925         12.848         12.811         12.659         11.693         11.373         10.853          10.04           8.84            1      
      3       0       1        12.933         12.923         12.976         13.021         13.072         13.075         12.979         12.875         12.779         12.691         12.648         12.533         11.693         11.333         10.787         9.9467         8.7333            1      
      4       1       1         12.76         12.717         12.917         13.037         13.128         13.155          13.08         12.957         12.853         12.763         12.755         12.688          11.68         11.333         10.733         9.9467         8.6533            1      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        6.6262           6.69         6.8285         6.9343         7.2515         8.4199          9.548         10.625         11.323         11.684         11.977         13.656         14.889         17.471         20.779         25.083         30.429           41.07   
      2       1       0        6.6738         6.8246         7.1501         7.3841         7.6483         8.6734         9.7786         10.952         11.657         12.022         12.252         13.783         14.925         17.506         20.814         25.046         30.472          41.105   
      3       0       1        6.8114         6.8929         7.0479         7.1732           7.26         7.8099         9.3966         10.734         11.535         12.007         12.163         13.648         15.089         17.779         21.123         25.243         30.792          41.376   
      4       1       1        6.9273         7.0952         7.4299          7.692          7.848         8.2769          9.651         11.123         11.953          12.45         12.582         13.806         15.194         17.886         21.273         25.354         30.922          41.491   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_12.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_13.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_14.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_15.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_16.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_grid_search_images/figure_17.png" width="500" /></p>
</div>

</div>
</div>
<div id="small-test-exact-solution-vectorized-bisection" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Small Test Exact Solution Vectorized Bisection</h2>
<div class="par">
<div class="flushleft">
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function with vectorized bisection. Small Solution
Analysis. Small Solution Analysis, husband 5 shocks, wife 1 shocks.</p>
</div>
</div>
<div id="test-snw_vfi_main-defaults-small-1" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<div class="par">
<div class="flushleft">
<p>Call the function with defaults parameters.</p>
</div>
</div>
<pre><code>mp_param = snw_mp_param(&#39;default_small&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_bisec_vec(mp_param);

SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:18 of 17, time-this-age:0.06059
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:17 of 17, time-this-age:0.052828
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:16 of 17, time-this-age:0.032745
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:15 of 17, time-this-age:0.029085
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:14 of 17, time-this-age:0.035583
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:13 of 17, time-this-age:0.034991
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:12 of 17, time-this-age:0.033648
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:11 of 17, time-this-age:0.032963
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:10 of 17, time-this-age:0.033174
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:9 of 17, time-this-age:0.036843
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:8 of 17, time-this-age:0.04052
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:7 of 17, time-this-age:0.028633
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:6 of 17, time-this-age:0.035108
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:5 of 17, time-this-age:0.033838
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:4 of 17, time-this-age:0.033585
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:3 of 17, time-this-age:0.03214
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:2 of 17, time-this-age:0.028888
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:1 of 17, time-this-age:0.031611
Completed SNW_VFI_MAIN_BISEC_VEC;SNW_MP_PARAM=default_small;SNW_MP_CONTROL=default_base;time=0.72345</code></pre>
</div>
<div id="small-param-results-define-frames-2" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Small Param Results Define Frames</h3>
<div class="par">
<div class="flushleft">
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
</div>
</div>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;Hshock&#39;, eta_H_grid});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-3" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Analyze Savings and Shocks</h3>
<div class="par">
<div class="flushleft">
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies along savings and shocks:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          -21.426                 -13.175              -8.362             -5.4972                -3.9407     
      2      0.0097656          -20.989                 -13.027             -8.2755             -5.4264                 -3.874     
      3       0.078125          -18.901                 -12.204             -7.8053             -5.0563                -3.5316     
      4        0.26367          -15.612                 -10.744             -7.0124             -4.4893                 -3.033     
      5          0.625          -12.124                 -8.9835             -6.0664             -3.8998                -2.5588     
      6         1.2207          -9.0979                 -7.2177             -5.0967             -3.3546                -2.1657     
      7         2.1094          -6.7401                 -5.6532             -4.2107             -2.8614                -1.8516     
      8         3.3496          -4.9967                 -4.3739             -3.4359             -2.4175                -1.5968     
      9              5          -3.7353                 -3.3758             -2.7788             -2.0342                -1.3834     
     10         7.1191          -2.8279                  -2.617             -2.2393             -1.7115                -1.1997     
     11         9.7656           -2.172                 -2.0455             -1.8057             -1.4379                -1.0388     
     12         12.998           -1.693                 -1.6153             -1.4614             -1.2066               -0.89932     
     13         16.875          -1.3389                 -1.2899             -1.1896             -1.0131               -0.77961     
     14         21.455          -1.0737                  -1.042            -0.97552            -0.85247               -0.67683     
     15         26.797           -0.872                -0.85104            -0.80614            -0.71965               -0.58803     
     16         32.959         -0.71656                -0.70236            -0.67148            -0.61005               -0.51138     
     17             40         -0.59521                -0.58538            -0.56375             -0.5196                -0.4454     
     18         47.979         -0.49932                -0.49238            -0.47697            -0.44484               -0.38876     
     19         56.953         -0.42266                -0.41768            -0.40651            -0.38285                -0.3402     
     20         66.982         -0.36074                 -0.3571            -0.34889            -0.33125               -0.29857     
     21         78.125         -0.31022                -0.30751            -0.30139            -0.28809               -0.26288     
     22         90.439         -0.26861                -0.26658            -0.26196            -0.25181               -0.23222     
     23         103.98         -0.23407                -0.23252            -0.22899            -0.22118               -0.20583     
     24         118.82         -0.20516                -0.20397            -0.20125            -0.19517               -0.18307     
     25            135          -0.1808                -0.17987            -0.17775            -0.17298               -0.16337     

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0        3.2159e-05              0.0034995            0.049878             0.24382               0.89303      
      2      0.0097656        0.00055365              0.0052722            0.053281             0.24787               0.89865      
      3       0.078125          0.021863               0.029676            0.083029              0.2805               0.93962      
      4        0.26367           0.13323                0.14751             0.20012             0.38877                 1.059      
      5          0.625           0.39134                0.41034             0.45315             0.64573                1.3086      
      6         1.2207           0.84131                0.86393             0.91226              1.0928                 1.745      
      7         2.1094            1.5303                 1.5542              1.6156              1.7559                2.3963      
      8         3.3496            2.4876                 2.5118               2.573              2.6876                3.3398      
      9              5            3.7642                 3.7887              3.8498              3.9922                 4.592      
     10         7.1191            5.4275                 5.4525              5.5145              5.6929                6.1933      
     11         9.7656            7.4794                 7.5043              7.5679              7.7532                8.1877      
     12         12.998            9.9124                 9.9329              9.9956              10.186                10.627      
     13         16.875            12.928                  12.95              13.005              13.196                13.715      
     14         21.455            16.529                 16.548              16.604              16.783                17.374      
     15         26.797            20.601                 20.618              20.668              20.837                21.462      
     16         32.959            25.307                 25.325               25.37              25.525                26.151      
     17             40            30.667                 30.689              30.742              30.886                31.487      
     18         47.979            36.761                 36.782              36.841              36.999                37.562      
     19         56.953            43.773                 43.795              43.847              44.012                 44.56      
     20         66.982            51.605                 51.628              51.688               51.85                52.402      
     21         78.125            59.954                 59.977              60.037              60.209                60.766      
     22         90.439            69.265                 69.288               69.35              69.526                70.095      
     23         103.98             79.75                 79.771              79.831              80.004                80.583      
     24         118.82            91.112                 91.136              91.198              91.364                91.939      
     25            135            103.47                 103.49              103.54              103.72                104.29      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_Hshock__1_8395    mean_Hshock__0_91976    mean_Hshock_0    mean_Hshock_0_91976    mean_Hshock_1_8395
    _____    _________    ___________________    ____________________    _____________    ___________________    __________________

      1              0          0.30273                0.43104              0.68779             1.2165                 2.3366      
      2      0.0097656          0.31374                0.44074              0.69581             1.2239                 2.3424      
      3       0.078125          0.37308                0.49663              0.74605              1.271                 2.3812      
      4        0.26367          0.48039                0.59659                0.846             1.3793                 2.4781      
      5          0.625          0.64735                0.75745               1.0153             1.5439                 2.6497      
      6         1.2207          0.89649                 1.0013               1.2519             1.7913                 2.9071      
      7         2.1094           1.2479                 1.3498               1.5854             2.1634                 3.2903      
      8         3.3496           1.7393                 1.8394               2.0734             2.6754                 3.7896      
      9              5           2.3872                 2.4859               2.7182             3.2909                 4.4564      
     10         7.1191           3.1917                  3.289               3.5191             4.0542                 5.3181      
     11         9.7656           4.2188                 4.3155                4.543               5.07                 6.3986      
     12         12.998           5.5439                 5.6447               5.8722             6.3933                 7.7142      
     13         16.875           7.0334                  7.133               7.3676             7.8866                 9.1285      
     14         21.455            8.754                 8.8551               9.0887             9.6188                 10.789      
     15         26.797           10.886                 10.989               11.228             11.768                 12.903      
     16         32.959           13.336                 13.439               13.682             14.235                 15.368      
     17             40           16.151                 16.249               16.485             17.049                 18.207      
     18         47.979           19.321                  19.42                19.65               20.2                 21.395      
     19         56.953           22.728                 22.827               23.062             23.605                 24.816      
     20         66.982           26.539                 26.637               26.865              27.41                 28.616      
     21         78.125           31.125                 31.222               31.451             31.986                 33.187      
     22         90.439            36.11                 36.207               36.433             36.965                 38.154      
     23         103.98           41.348                 41.447               41.676              42.21                 43.389      
     24         118.82           47.206                 47.302               47.528              48.07                 49.252      
     25            135           53.636                 53.735               53.966             54.501                 55.689      </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_0.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_1.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_2.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_3.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_4.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_5.png" width="500" /></p>
</div>
</div>
<div id="analyze-kids-and-marriage-and-age-2" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Analyze Kids and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        -4.7384        -4.2839        -3.9125        -3.6403        -3.4202        -3.2286        -3.0466        -2.8601        -2.6595        -2.4491        -2.2399        -2.0731        -2.3629        -1.8637        -1.4355         -1.116       -0.89281        -0.68658  
      2       2        0        -6.2307        -5.5732         -5.014        -4.5943        -4.2483        -3.9542        -3.6887         -3.434        -3.1782        -2.9257        -2.6801        -2.4926        -2.8794        -2.3137        -1.8328        -1.4683        -1.2096        -0.97097  
      3       3        0        -6.9818        -6.3368        -5.7685        -5.3334        -4.9708        -4.6532        -4.3595        -4.0736        -3.7846        -3.4985        -3.2208        -3.0125        -3.5228        -2.8558        -2.2747        -1.8248        -1.5002         -1.1892  
      4       1        1        -4.1822        -3.7934        -3.4691        -3.2086         -2.984        -2.7815        -2.5887        -2.3963        -2.1988        -2.0023        -1.8175        -1.6729        -1.7337        -1.3601        -1.0432       -0.80128       -0.63711        -0.48578  
      5       2        1         -5.157         -4.667        -4.2348        -3.8784        -3.5654        -3.2867        -3.0293        -2.7824        -2.5391        -2.3051        -2.0863        -1.9132        -1.9616        -1.5551        -1.2079       -0.94165       -0.76108        -0.59364  
      6       3        1        -5.5929        -5.1267        -4.7056         -4.352        -4.0378        -3.7489        -3.4736        -3.2028        -2.9306        -2.6639        -2.4094        -2.1983        -2.2235        -1.7704        -1.3796        -1.0769       -0.86971        -0.67418  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        34.931         34.726         34.665         34.554         34.362         34.077         33.682         33.147         32.422           31.5         30.819         29.713         26.817         24.458         21.039         16.761         11.058            0      
      2       2        0        34.603         34.334         34.198         33.995         33.692         33.286         32.762         32.089         31.289         30.736         29.885         28.361         25.892         23.172         19.841         15.524         10.196            0      
      3       3        0        34.187         33.968         33.877         33.705         33.427         33.033          32.51          31.83          31.11          30.61         29.726         28.203         25.828         23.157         19.895         15.696          10.38            0      
      4       1        1        34.821         34.617         34.566         34.458         34.268         33.984         33.592         33.061         32.337         31.426         30.766         29.672         26.686         24.311         20.849         16.614         10.957            0      
      5       2        1         34.67          34.45         34.364         34.205         33.951         33.592         33.119         32.502         31.689         30.947         30.272         28.936         26.238         23.551         20.155         16.013          10.39            0      
      6       3        1        34.303         34.118         34.065         33.937         33.705         33.363         32.896         32.277         31.468         30.828         30.119         28.736         26.155          23.47         20.114         16.016         10.488            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.8531         7.1729         7.4988         7.8167         8.1435         8.4993         8.9181         9.4437         10.134         10.995         11.582         12.551          14.27         16.629         20.048         24.326         30.029          41.087   
      2       2        0         7.182         7.5653         7.9659         8.3756          8.813         9.2907         9.8382         10.502         11.267         11.759         12.516         13.903         15.195         17.915         21.247         25.563         30.891          41.087   
      3       3        0        7.5973          7.931         8.2872         8.6657         9.0783         9.5438         10.091         10.761         11.445         11.885         12.675         14.061         15.259          17.93         21.192         25.392         30.707          41.087   
      4       1        1        7.1848         7.5242         7.8662         8.2047          8.552         8.9277         9.3635          9.904          10.61         11.476         12.055         13.024         14.702         17.087         20.557           24.8         30.464          41.428   
      5       2        1        7.3021         7.6535         8.0269          8.412         8.8205         9.2678         9.7814         10.405         11.198         11.892         12.485         13.693         15.151         17.848         21.253         25.403         31.033           41.43   
      6       3        1        7.6455         7.9599          8.297         8.6497         9.0324          9.462         9.9672         10.591         11.378         11.968         12.594         13.847         15.246         17.941         21.307         25.412         30.948          41.443   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_6.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_7.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_8.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_9.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_10.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_11.png" width="500" /></p>
</div>
</div>
<div id="analyze-education-and-marriage-and-age-2" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Analyze Education and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        -6.4015        -5.8666        -5.3879        -4.9966        -4.6557        -4.3525        -4.0711        -3.7972        -3.5191        -3.2399        -2.9631        -2.7398        -3.0999        -2.4877        -1.9609         -1.561        -1.2765         -1.0093  
      2       1       0        -5.5658        -4.9294        -4.4088        -4.0487        -3.7705        -3.5382        -3.3254        -3.1146        -2.8958        -2.6757        -2.4641        -2.3123        -2.7435         -2.201        -1.7345        -1.3784        -1.1253        -0.88856  
      3       0       1          -5.35         -4.913        -4.5196        -4.1777         -3.867        -3.5814        -3.3116         -3.049        -2.7867        -2.5306        -2.2873        -2.0881        -2.1106        -1.6708        -1.2955        -1.0066       -0.80985        -0.62643  
      4       1       1        -4.6046        -4.1451        -3.7534        -3.4483        -3.1912        -2.9633        -2.7494        -2.5387        -2.3256        -2.1169        -1.9214        -1.7682        -1.8352        -1.4529        -1.1251       -0.87332       -0.70209        -0.54263  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        34.682         34.444         34.272         34.048         33.753         33.374         32.888         32.256         31.512         30.851          30.02         28.595          26.17         23.589         20.254         15.987         10.542            0      
      2       1       0        34.465         34.241         34.222         34.121         33.901         33.556         33.081         32.455         31.703         31.046         30.267         28.923         26.188         23.603         20.262             16         10.548            0      
      3       0       1        34.725         34.514         34.372         34.177         33.914         33.569          33.12         32.528          31.74         30.976         30.277         28.965         26.367          23.79         20.393         16.226         10.623            0      
      4       1       1         34.47         34.277         34.291         34.223         34.035         33.724         33.285         32.699         31.923         31.158         30.495         29.265         26.352         23.764         20.352         16.203         10.601            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        7.1022         7.4087         7.7357         8.0845         8.4713         8.9105          9.427         10.062         10.782         11.389         12.136         13.445           14.9          17.48         20.815         25.082         30.528           41.07   
      2       1       0        7.3195         7.7041         8.0988         8.4875         8.8852          9.312         9.8044         10.409         11.116         11.703         12.379         13.565         14.917         17.502         20.843         25.105         30.557          41.105   
      3       0       1        7.2307         7.5253         7.8393         8.1757         8.5471         8.9685         9.4633         10.073          10.85         11.572         12.198         13.402         14.973         17.559         20.964         25.138         30.748          41.376   
      4       1       1        7.5242         7.8997         8.2875         8.6685         9.0562         9.4697         9.9448         10.527         11.274         11.985         12.558         13.641         15.093         17.692         21.114         25.272         30.882          41.491   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_12.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_13.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_14.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_15.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_16.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_images/figure_17.png" width="500" /></p>
</div>

</div>
</div>
<div id="small-test-exact-solution-spousal-shocks" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Small Test Exact Solution Spousal Shocks</h2>
<div class="par">
<div class="flushleft">
<p>This is the example vignette for function:
<a href="https://github.com/FanWangEcon/PrjOptiSNW/tree/master/PrjOptiSNW/svalpol/snw_vfi_main_bisec_vec.m"><strong>snw_vfi_main_bisec_vec</strong></a>
from the <a href="https://fanwangecon.github.io/PrjOptiSNW/"><strong>PrjOptiSNW
Package</strong></a><strong>.</strong> This function
solves for policy function with vectorized bisection. Small Solution
Analysis, husband 5 shocks, wife 3 shocks.</p>
</div>
</div>
<div id="test-snw_vfi_main-defaults-small-2" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Test SNW_VFI_MAIN Defaults Small</h3>
<div class="par">
<div class="flushleft">
<p>Call the function with default parameters.</p>
</div>
</div>
<pre><code>mp_param = snw_mp_param(&#39;default_small53&#39;);
[V_VFI,ap_VFI,cons_VFI,mp_valpol_more] = snw_vfi_main_bisec_vec(mp_param);

SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:18 of 17, time-this-age:0.10593
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:17 of 17, time-this-age:0.086471
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:16 of 17, time-this-age:0.079532
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:15 of 17, time-this-age:0.095977
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:14 of 17, time-this-age:0.081549
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:13 of 17, time-this-age:0.08703
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:12 of 17, time-this-age:0.089059
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:11 of 17, time-this-age:0.094402
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:10 of 17, time-this-age:0.10011
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:9 of 17, time-this-age:0.093424
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:8 of 17, time-this-age:0.095447
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:7 of 17, time-this-age:0.10832
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:6 of 17, time-this-age:0.089896
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:5 of 17, time-this-age:0.09249
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:4 of 17, time-this-age:0.094699
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:3 of 17, time-this-age:0.087703
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:2 of 17, time-this-age:0.0939
SNW_VFI_MAIN_BISEC_VEC: Finished Age Group:1 of 17, time-this-age:0.087152
Completed SNW_VFI_MAIN_BISEC_VEC;SNW_MP_PARAM=default_small53;SNW_MP_CONTROL=default_base;time=1.7157</code></pre>
</div>
<div id="small-param-results-define-frames-3" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Small Param Results Define Frames</h3>
<div class="par">
<div class="flushleft">
<p>Define the matrix dimensions names and dimension vector values. Policy
and Value Functions share the same ND dimensional structure.</p>
</div>
</div>
<pre><code>% Grids:
age_grid = [19, 22:5:97, 100];
agrid = mp_param(&#39;agrid&#39;)&#39;;
eta_H_grid = mp_param(&#39;eta_H_grid&#39;)&#39;;
eta_S_grid = mp_param(&#39;eta_S_grid&#39;)&#39;;
ar_st_eta_HS_grid = string(cellstr([num2str(eta_H_grid&#39;, &#39;hz=%3.2f;&#39;), num2str(eta_S_grid&#39;, &#39;wz=%3.2f&#39;)]));
edu_grid = [0,1];
marry_grid = [0,1];
kids_grid = (1:1:mp_param(&#39;n_kidsgrid&#39;))&#39;;
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
cl_mp_datasetdesc = {};
cl_mp_datasetdesc{1} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;age&#39;, age_grid});
cl_mp_datasetdesc{2} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;savings&#39;, agrid});
cl_mp_datasetdesc{3} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;eta&#39;, 1:length(eta_H_grid)});
cl_mp_datasetdesc{4} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;edu&#39;, edu_grid});
cl_mp_datasetdesc{5} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;marry&#39;, marry_grid});
cl_mp_datasetdesc{6} = containers.Map({&#39;name&#39;, &#39;labval&#39;}, {&#39;kids&#39;, kids_grid});</code></pre>
</div>
<div id="analyze-savings-and-shocks-4" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Analyze Savings and Shocks</h3>
<div class="par">
<div class="flushleft">
<p>First, analyze Savings Levels and Shocks, Aggregate Over All Others, and
do various other calculations.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Savings States, a&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;it_legend_select&#39;) = 9; % how many shock legends to show
mp_support_graph(&#39;cl_colors&#39;) = &#39;jet&#39;;</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(A,Z)), MEAN(AP(A,Z)), MEAN(C(A,Z))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies along savings and shocks:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [1,4,5,6,3,2];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(A,Z))&quot;, V_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0      -24.423       -14.383       -9.0838       -6.1681       -4.6368        -21.16       -12.873       -8.1373       -5.3766       -3.8904        -16.593        -9.8032        -6.1944        -4.1246         -2.992  
      2      0.0097656      -23.655       -14.141       -8.9428       -6.0477        -4.521       -20.721       -12.725       -8.0508       -5.3059       -3.8237        -16.217        -9.6854        -6.1244        -4.0657        -2.9359  
      3       0.078125      -20.274       -12.864       -8.2087        -5.441       -3.9447       -18.597       -11.897       -7.5808       -4.9362       -3.4813        -14.463        -9.0428        -5.7563        -3.7684        -2.6574  
      4        0.26367      -16.052       -10.951       -7.1333        -4.627       -3.2033       -15.258       -10.427       -6.7883       -4.3683       -2.9802        -11.797        -7.9418        -5.1698        -3.3421        -2.2775  
      5          0.625      -12.169       -8.9647       -6.0525        -3.918       -2.6128       -11.753         -8.67       -5.8499       -3.7794       -2.5033        -9.0813        -6.6522        -4.4995        -2.9252        -1.9394  
      6         1.2207      -8.9956       -7.1143       -5.0287       -3.3224         -2.17       -8.7621        -6.936       -4.9021        -3.241       -2.1112        -6.8238        -5.3898        -3.8277         -2.555         -1.673  
      7         2.1094      -6.6026       -5.5315        -4.126       -2.8111       -1.8354       -6.4689       -5.4217       -4.0462       -2.7603       -1.8014        -5.1255        -4.2907        -3.2213        -2.2246         -1.465  
      8         3.3496      -4.8705       -4.2629       -3.3542       -2.3677       -1.5738       -4.7931       -4.1953       -3.3029       -2.3333       -1.5524        -3.8915        -3.3981         -2.689         -1.925        -1.2946  
      9              5      -3.6341       -3.2853       -2.7087       -1.9911       -1.3595       -3.5888       -3.2436       -2.6752       -1.9675       -1.3452        -2.9917        -2.6943        -2.2294        -1.6593        -1.1473  
     10         7.1191      -2.7516       -2.5471       -2.1826       -1.6748       -1.1772       -2.7246       -2.5212       -2.1608       -1.6587       -1.1674        -2.3319        -2.1467         -1.842        -1.4274        -1.0161  
     11         9.7656      -2.1163       -1.9932       -1.7614       -1.4073       -1.0193       -2.0999        -1.977       -1.7471       -1.3963       -1.0123        -1.8424        -1.7234        -1.5212        -1.2238       -0.89713  
     12         12.998       -1.653       -1.5768       -1.4275       -1.1818      -0.88344       -1.6428       -1.5665        -1.418       -1.1741       -0.8782        -1.4731        -1.3952        -1.2592        -1.0464       -0.79051  
     13         16.875      -1.3103       -1.2619       -1.1642      -0.99332      -0.76691       -1.3038       -1.2552       -1.1578      -0.98793      -0.76296        -1.1903        -1.1387        -1.0462       -0.89385       -0.69565  
     14         21.455      -1.0532       -1.0216      -0.95651      -0.83698      -0.66655       -1.0489       -1.0172      -0.95213      -0.83317      -0.66362       -0.97149       -0.93682       -0.87335       -0.76404       -0.61178  
     15         26.797     -0.85714      -0.83614      -0.79193       -0.7076      -0.57964      -0.85429      -0.83312      -0.78891      -0.70488      -0.57747       -0.80054       -0.77679       -0.73269       -0.65391       -0.53753  
     16         32.959      -0.7057      -0.69138      -0.66083      -0.60072      -0.50456      -0.70375       -0.6893      -0.65871      -0.59875      -0.50294       -0.66579        -0.6492       -0.61808       -0.56093       -0.47215  
     17             40     -0.58719      -0.57722      -0.55573      -0.51237      -0.43988      -0.58583      -0.57576      -0.55422      -0.51094      -0.43866       -0.55862       -0.54682       -0.52452       -0.48265       -0.41486  
     18         47.979     -0.49334      -0.48626      -0.47088      -0.43924      -0.38431      -0.49239      -0.48522      -0.46979      -0.43817      -0.38338       -0.47262       -0.46407       -0.44785       -0.41687       -0.36491  
     19         56.953     -0.41818      -0.41306      -0.40187      -0.37849      -0.33661      -0.41749       -0.4123      -0.40107      -0.37769      -0.33589       -0.40296       -0.39666       -0.38469       -0.36151       -0.32149  
     20         66.982     -0.35736      -0.35359      -0.34532      -0.32783      -0.29568      -0.35685      -0.35303      -0.34473      -0.32724      -0.29513       -0.34603       -0.34132       -0.33236       -0.31483       -0.28383  
     21         78.125     -0.30764      -0.30483      -0.29864      -0.28541      -0.26055      -0.30727      -0.30442       -0.2982      -0.28496      -0.26012       -0.29912       -0.29556       -0.28878       -0.27538        -0.2512  
     22         90.439     -0.26663      -0.26451      -0.25982      -0.24971      -0.23034      -0.26635       -0.2642      -0.25949      -0.24936         -0.23       -0.26018       -0.25746       -0.25226       -0.24193       -0.22294  
     23         103.98     -0.23253      -0.23091      -0.22732      -0.21951      -0.20431      -0.23232      -0.23068      -0.22707      -0.21925      -0.20405       -0.22759       -0.22549       -0.22148       -0.21344       -0.19844  
     24         118.82     -0.20396      -0.20271      -0.19994      -0.19386      -0.18184       -0.2038      -0.20253      -0.19974      -0.19365      -0.18164       -0.20014       -0.19851       -0.19538       -0.18908       -0.17714  
     25            135     -0.17985      -0.17888      -0.17671      -0.17193      -0.16238      -0.17973      -0.17874      -0.17656      -0.17177      -0.16221       -0.17685       -0.17557        -0.1731        -0.1681       -0.15852  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(A,Z))&quot;, ap_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0    3.2159e-05    0.0024668      0.032046      0.17185       0.75713      0.0035503     0.0057037      0.047179      0.22128        0.83929        1.5949         1.7717         1.9927         2.3825          3.261   
      2      0.0097656    0.00055365    0.0039513      0.034103      0.17524       0.76251      0.0051645     0.0082793      0.050114      0.22508        0.84479        1.5992         1.7765         1.9982         2.3881         3.2676   
      3       0.078125      0.015815     0.020023      0.052271      0.20181        0.8015       0.036634      0.037379      0.078236       0.2558        0.88531        1.6417         1.8168         2.0406         2.4302         3.3143   
      4        0.26367      0.094638     0.094808       0.12856      0.29193       0.91314        0.14372       0.15181       0.19153      0.36171         1.0035        1.7785         1.9511         2.1757          2.555         3.4442   
      5          0.625       0.31851      0.32442       0.35753      0.52484        1.1543        0.39249       0.40496       0.43751      0.61133         1.2467        2.0525         2.2281         2.4483         2.8196         3.7031   
      6         1.2207       0.75143      0.75176       0.79303      0.95962        1.5772         0.8339       0.84934       0.88966       1.0532         1.6786        2.5043         2.6788         2.9087         3.2694         4.1441   
      7         2.1094        1.4241       1.4284        1.4709       1.6269        2.2293         1.5113        1.5285        1.5802       1.7093          2.329        3.1791         3.3637         3.5917         3.9381         4.7981   
      8         3.3496        2.3733       2.3796         2.421       2.5737        3.1535         2.4564        2.4749        2.5266        2.646         3.2655         4.145         4.3264         4.5493         4.8846         5.7519   
      9              5        3.6394       3.6466        3.6884       3.8506        4.3901         3.7225        3.7419        3.7947       3.9465         4.5072        5.4003         5.5927          5.824         6.1639         6.9962   
     10         7.1191        5.2875       5.2955        5.3372       5.5015        5.9876         5.3719        5.3915        5.4459       5.6201          6.097        7.0272         7.2068         7.4331         7.8074         8.5649   
     11         9.7656        7.3153       7.3234        7.3642       7.5288        8.0042         7.4069        7.4251        7.4813       7.6575         8.0966        9.1171         9.2822         9.5067         9.8589         10.592   
     12         12.998        9.7556       9.7616        9.8006        9.967         10.49         9.8338        9.8499        9.9027       10.084         10.556        11.529          11.72          11.94         12.294         13.012   
     13         16.875        12.766       12.773        12.807        12.97        13.562         12.844        12.858        12.906       13.086         13.646        14.521          14.72          14.97         15.326         16.074   
     14         21.455        16.338       16.342        16.377       16.524        17.139         16.426         16.44        16.486       16.653         17.268        18.053         18.254         18.515         18.904         19.658   
     15         26.797        20.401       20.403        20.431        20.57        21.185         20.487        20.497        20.537       20.693         21.324        22.072         22.259         22.513          22.91         23.737   
     16         32.959        25.088       25.095        25.124       25.248        25.842         25.176        25.189        25.224       25.366         25.983        26.768         26.951          27.19         27.575         28.418   
     17             40        30.463       30.471         30.51       30.633        31.193          30.54        30.556        30.606       30.737         31.322        32.154         32.337         32.575         32.941         33.784   
     18         47.979        36.558       36.567        36.609       36.754        37.274         36.633        36.649        36.697       36.853         37.394        38.337          38.51         38.745         39.114         39.912   
     19         56.953         43.57       43.576        43.612       43.757        44.279         43.643        43.658        43.705        43.86         44.396          45.2         45.358         45.578          45.94         46.719   
     20         66.982        51.378       51.387        51.429       51.567        52.101         51.457        51.473        51.523       51.675          52.22        52.915         53.068         53.277          53.62         54.386   
     21         78.125        59.666       59.675        59.721       59.878         60.41          59.76        59.777        59.832       59.994         60.541        61.518         61.668         61.872         62.207         62.952   
     22         90.439         69.02       69.027        69.069       69.228        69.775           69.1        69.116        69.169       69.339         69.894        70.927         71.078         71.279         71.606         72.331   
     23         103.98        79.509       79.516        79.557       79.706         80.27         79.589        79.604        79.653       79.814         80.386        81.356         81.509         81.709         82.032         82.742   
     24         118.82         90.88       90.887        90.929       91.074        91.625         90.956        90.971        91.022        91.18         91.743        92.752         92.917         93.126         93.447         94.141   
     25            135        103.23       103.23        103.27       103.42        103.97         103.31        103.32        103.37       103.53         104.08        105.13         105.34          105.6            106         106.84   

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(A,Z))&quot;, cons_VFI, true, [&quot;mean&quot;], 4, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(A,Z))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group     savings     mean_eta_1    mean_eta_2    mean_eta_3    mean_eta_4    mean_eta_5    mean_eta_6    mean_eta_7    mean_eta_8    mean_eta_9    mean_eta_10    mean_eta_11    mean_eta_12    mean_eta_13    mean_eta_14    mean_eta_15
    _____    _________    __________    __________    __________    __________    __________    __________    __________    __________    __________    ___________    ___________    ___________    ___________    ___________    ___________

      1              0     0.16881       0.29125       0.55695        1.1299        2.3014       0.29922       0.42884       0.69049        1.2391        2.3904         1.4929         1.6544         1.9693         2.5658         3.7569   
      2      0.0097656     0.17988       0.30127       0.56634        1.1379        2.3074       0.30913       0.43773       0.69898        1.2467        2.3963         1.5001          1.661         1.9751         2.5716         3.7617   
      3       0.078125     0.24566       0.36575       0.62833        1.1912        2.3483       0.35831       0.48892       0.75085        1.2958        2.4355         1.5378         1.7008         2.0126         2.6092         3.7946   
      4        0.26367     0.38648       0.50942       0.76949         1.318        2.4533        0.4699        0.5923       0.85458        1.4064        2.5337         1.6186         1.7834         2.0939         2.7005         3.8807   
      5          0.625     0.58919       0.70456       0.96359        1.5071        2.6337       0.64619       0.76283         1.031        1.5783        2.7116         1.7678         1.9286         2.2426         2.8567         4.0424   
      6         1.2207     0.85722       0.97603        1.2247        1.7675        2.9054        0.9039        1.0159        1.2745        1.8309        2.9736         2.0124         2.1733         2.4764         3.1003         4.2945   
      7         2.1094      1.2268        1.3395        1.5846        2.1362        3.2884        1.2668        1.3754        1.6207          2.21        3.3577         2.3746         2.5243         2.8282         3.4654         4.6739   
      8         3.3496      1.7279         1.837        2.0808        2.6338        3.8076        1.7706        1.8764        2.1198        2.7171         3.864          2.854         3.0061         3.3138         3.9611         5.1618   
      9              5      2.3875        2.4944        2.7359        3.2775        4.4904        2.4289        2.5327        2.7733        3.3366        4.5412         3.5199         3.6601         3.9585         4.6003         5.8351   
     10         7.1191      3.2081        3.3133        3.5534        4.0911        5.3563        3.2473          3.35        3.5876         4.127        5.4144         4.3576         4.5101         4.8127         5.4191         6.7283   
     11         9.7656      4.2601        4.3643        4.6042        5.1402        6.4149        4.2913        4.3947        4.6296        5.1656        6.4897          5.344         5.5106         5.8143         6.4421         7.7753   
     12         12.998      5.5783        5.6843        5.9251        6.4581         7.684        5.6225        5.7276         5.965        6.4951        7.7847         6.6877         6.8281         7.1356         7.7609         9.1086   
     13         16.875      7.0733        7.1787        7.4234        7.9594        9.1154        7.1181        7.2243        7.4664        7.9965        9.1977         8.1993         8.3316         8.6084         9.2321         10.549   
     14         21.455       8.823        8.9302        9.1737        9.7243        10.857        8.8568        8.9633         9.206        9.7494        10.894         9.9861         10.116         10.382         10.972         12.283   
     15         26.797      10.964        11.073        11.324        11.882        13.013        10.999        11.111        11.359        11.912        13.041          12.17         12.314         12.587         13.168         14.405   
     16         32.959      13.433        13.538        13.787         14.36        15.511        13.467        13.574        13.828        14.395        15.537         14.629         14.778         15.065         15.658         16.878   
     17             40      16.233        16.337        16.576        17.149        18.335        16.278        16.383        16.621        17.198        18.372         17.418         17.566         17.854         18.466         19.687   
     18         47.979      19.402        19.505        19.741        20.291        21.516        19.449        19.553        19.793        20.346        21.562         20.498         20.656         20.947         21.555          22.82   
     19         56.953       22.81        22.914        23.156        23.707         24.93        22.858        22.963        23.205        23.757        24.979         24.053         24.227         24.532         25.148         26.431   
     20         66.982      26.645        26.747        26.982         27.54         28.75        26.687        26.791         27.03        27.585        28.798         27.981          28.16         28.477         29.111         30.407   
     21         78.125      31.292        31.394        31.626        32.165        33.377        31.319        31.422        31.656        32.201        33.412         32.313         32.494         32.816         33.459         34.776   
     22         90.439      36.234        36.338        36.573         37.11        38.307        36.274        36.379        36.614        37.152        38.354         37.199          37.38         37.704         38.354         39.691   
     23         103.98      41.468        41.572        41.808        42.355        43.535        41.509        41.615        41.854          42.4        43.585         42.494         42.672         42.998         43.651         45.004   
     24         118.82      47.317        47.421        47.656        48.207          49.4        47.362        47.467        47.704        48.254        49.447         48.317         48.483           48.8         49.456         50.824   
     25            135      53.752        53.857        54.095        54.642        55.842        53.796        53.902        54.143        54.689        55.891         54.721         54.845         55.109         55.682         56.909   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(a,z))&#39;};
ff_graph_grid((tb_az_v{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_0.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_1.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(a,z))&#39;};
ff_graph_grid((tb_az_ap{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_2.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_3.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(a,z)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(a,z))&#39;};
ff_graph_grid((tb_az_c{1:end, 3:end})&#39;, ar_st_eta_HS_grid, agrid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_4.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_5.png" width="500" /></p>
</div>
</div>
<div id="analyze-kids-and-marriage-and-age-3" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Analyze Kids and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;k0M0&quot;, &quot;K1M0&quot;, &quot;K2M0&quot;, &quot;k0M1&quot;, &quot;K1M1&quot;, &quot;K2M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = { &#39;o&#39;, &#39;d&#39; ,&#39;s&#39;, &#39;o&#39;, &#39;d&#39;, &#39;s&#39;};
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(KM,J)), MEAN(AP(KM,J)), MEAN(C(KM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,4,1,6,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(KM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        -4.7384        -4.2839        -3.9125        -3.6403        -3.4202        -3.2286        -3.0466        -2.8601        -2.6595        -2.4491        -2.2399        -2.0731        -2.3629        -1.8637        -1.4355         -1.116       -0.89281        -0.68658  
      2       2        0        -6.2307        -5.5732         -5.014        -4.5943        -4.2483        -3.9542        -3.6887         -3.434        -3.1782        -2.9257        -2.6801        -2.4926        -2.8794        -2.3137        -1.8328        -1.4683        -1.2096        -0.97097  
      3       3        0        -6.9818        -6.3368        -5.7685        -5.3334        -4.9708        -4.6532        -4.3595        -4.0736        -3.7846        -3.4985        -3.2208        -3.0125        -3.5228        -2.8558        -2.2747        -1.8248        -1.5002         -1.1892  
      4       1        1        -3.4759        -3.1424        -2.8538        -2.6272        -2.4359        -2.2663        -2.1075        -1.9513        -1.7931        -1.6374        -1.4932        -1.3847        -1.4858        -1.1944       -0.94216       -0.75023       -0.61798        -0.49489  
      5       2        1         -4.325        -3.9032        -3.5196        -3.2101        -2.9428        -2.7083        -2.4943        -2.2914        -2.0936        -1.9053        -1.7315        -1.5985        -1.6948        -1.3759        -1.0987       -0.88795       -0.74204        -0.60546  
      6       3        1        -4.7282        -4.3225        -3.9432        -3.6317        -3.3597        -3.1133        -2.8816        -2.6564        -2.4324        -2.2154        -2.0111        -1.8459        -1.9256        -1.5703        -1.2589        -1.0197       -0.85265        -0.69356  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(KM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        34.931         34.726         34.665         34.554         34.362         34.077         33.682         33.147         32.422           31.5         30.819         29.713         26.817         24.458         21.039         16.761         11.058            0      
      2       2        0        34.603         34.334         34.198         33.995         33.692         33.286         32.762         32.089         31.289         30.736         29.885         28.361         25.892         23.172         19.841         15.524         10.196            0      
      3       3        0        34.187         33.968         33.877         33.705         33.427         33.033          32.51          31.83          31.11          30.61         29.726         28.203         25.828         23.157         19.895         15.696          10.38            0      
      4       1        1        35.713         35.611           35.7         35.727          35.66         35.493         35.215         34.799         34.189         33.405         32.672         31.512         27.898         25.399          21.82         17.365         11.474            0      
      5       2        1        35.368         35.246         35.284         35.242         35.101         34.849         34.477         33.956         33.237         32.553         31.755         30.453         27.335         24.621         21.078         16.723         10.908            0      
      6       3        1        34.903          34.81          34.86         34.834           34.7         34.447         34.074         33.542         32.826         32.188         31.388         30.042         27.293         24.589         21.089         16.779         11.002            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(KM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(KM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    kids    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ____    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       1        0        6.8531         7.1729         7.4988         7.8167         8.1435         8.4993         8.9181         9.4437         10.134         10.995         11.582         12.551          14.27         16.629         20.048         24.326         30.029          41.087   
      2       2        0         7.182         7.5653         7.9659         8.3756          8.813         9.2907         9.8382         10.502         11.267         11.759         12.516         13.903         15.195         17.915         21.247         25.563         30.891          41.087   
      3       3        0        7.5973          7.931         8.2872         8.6657         9.0783         9.5438         10.091         10.761         11.445         11.885         12.675         14.061         15.259          17.93         21.192         25.392         30.707          41.087   
      4       1        1        7.7992          8.182         8.5624         8.9321          9.311         9.7148         10.172         10.725         11.436         12.283         13.029         14.136         15.519         18.092          21.74         26.258         32.205          43.729   
      5       2        1         7.879         8.2553         8.6555         9.0645         9.4908         9.9535         10.481         11.116         11.915         12.643         13.437         14.674         16.094         18.883         22.494         26.913         32.784          43.743   
      6       3        1        8.1608         8.4911         8.8566         9.2297         9.6299         10.077         10.589         11.219             12         12.669         13.454         14.725         16.228          19.01         22.581         26.956         32.792          43.847   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(KM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(KM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_6.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_7.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(KM,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_8.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_9.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(KM,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(KM,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_10.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_11.png" width="500" /></p>
</div>
</div>
<div id="analyze-education-and-marriage-and-age-3" class="section level3" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Analyze Education and Marriage and Age</h3>
<div class="par">
<div class="flushleft">
<p>Aggregating over education, savings, and shocks, what are the
differential effects of Marriage and Age.</p>
</div>
</div>
<pre><code>% Generate some Data
mp_support_graph = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;, &#39;any&#39;);
ar_row_grid = [&quot;E0M0&quot;, &quot;E1M0&quot;, &quot;E0M1&quot;, &quot;E1M1&quot;];
mp_support_graph(&#39;cl_st_xtitle&#39;) = {&#39;Age&#39;};
mp_support_graph(&#39;st_legend_loc&#39;) = &#39;best&#39;;
mp_support_graph(&#39;bl_graph_logy&#39;) = true; % do not log
mp_support_graph(&#39;st_rounding&#39;) = &#39;6.2f&#39;; % format shock legend
mp_support_graph(&#39;cl_scatter_shapes&#39;) = {&#39;*&#39;, &#39;p&#39;, &#39;*&#39;,&#39;p&#39; };
mp_support_graph(&#39;cl_colors&#39;) = {&#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;};</code></pre>
<div class="par">
<div class="flushleft">
<p>MEAN(VAL(EKM,J)), MEAN(AP(EKM,J)), MEAN(C(EKM,J))</p>
</div>
</div>
<div class="par">
<div class="flushleft">
<p>Tabulate value and policies:</p>
</div>
</div>
<pre><code>% Set
% NaN(n_jgrid,n_agrid,n_etagrid,n_educgrid,n_marriedgrid,n_kidsgrid);
ar_permute = [2,3,6,1,4,5];
% Value Function
tb_az_v = ff_summ_nd_array(&quot;MEAN(VAL(EKM,J))&quot;, V_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(VAL(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        -6.4015        -5.8666        -5.3879        -4.9966        -4.6557        -4.3525        -4.0711        -3.7972        -3.5191        -3.2399        -2.9631        -2.7398        -3.0999        -2.4877        -1.9609         -1.561        -1.2765         -1.0093  
      2       1       0        -5.5658        -4.9294        -4.4088        -4.0487        -3.7705        -3.5382        -3.3254        -3.1146        -2.8958        -2.6757        -2.4641        -2.3123        -2.7435         -2.201        -1.7345        -1.3784        -1.1253        -0.88856  
      3       0       1        -4.4764        -4.1029        -3.7581        -3.4622        -3.1968        -2.9557        -2.7306        -2.5141        -2.3006        -2.0946        -1.9015        -1.7476         -1.819         -1.475        -1.1758       -0.94656       -0.78798        -0.63847  
      4       1       1        -3.8764        -3.4759        -3.1196        -2.8504        -2.6288        -2.4363        -2.2583        -2.0853        -1.9122        -1.7442        -1.5889        -1.4719        -1.5851        -1.2854         -1.024       -0.82536       -0.68713        -0.55747  

% Aprime Choice
tb_az_ap = ff_summ_nd_array(&quot;MEAN(AP(EKM,J))&quot;, ap_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(AP(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        34.682         34.444         34.272         34.048         33.753         33.374         32.888         32.256         31.512         30.851          30.02         28.595          26.17         23.589         20.254         15.987         10.542            0      
      2       1       0        34.465         34.241         34.222         34.121         33.901         33.556         33.081         32.455         31.703         31.046         30.267         28.923         26.188         23.603         20.262             16         10.548            0      
      3       0       1        35.363         35.234         35.193         35.099         34.934         34.686         34.331         33.831         33.132         32.407         31.616         30.323         27.362         24.751         21.229         16.874         11.069            0      
      4       1       1        35.293          35.21          35.37         35.437         35.374         35.174         34.846         34.367         33.703         33.023         32.261         31.015         27.656         24.989         21.429         17.037         11.188            0      

% Consumption Choices
tb_az_c = ff_summ_nd_array(&quot;MEAN(C(EKM,J))&quot;, cons_VFI, true, [&quot;mean&quot;], 3, 1, cl_mp_datasetdesc, ar_permute);

xxx  MEAN(C(EKM,J))  xxxxxxxxxxxxxxxxxxxxxxxxxxx
    group    edu    marry    mean_age_19    mean_age_22    mean_age_27    mean_age_32    mean_age_37    mean_age_42    mean_age_47    mean_age_52    mean_age_57    mean_age_62    mean_age_67    mean_age_72    mean_age_77    mean_age_82    mean_age_87    mean_age_92    mean_age_97    mean_age_100
    _____    ___    _____    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ___________    ____________

      1       0       0        7.1022         7.4087         7.7357         8.0845         8.4713         8.9105          9.427         10.062         10.782         11.389         12.136         13.445           14.9          17.48         20.815         25.082         30.528           41.07   
      2       1       0        7.3195         7.7041         8.0988         8.4875         8.8852          9.312         9.8044         10.409         11.116         11.703         12.379         13.565         14.917         17.502         20.843         25.105         30.557          41.105   
      3       0       1        7.7587         8.0743         8.4083         8.7618         9.1489         9.5822         10.086         10.701          11.48         12.245         13.031          14.27         15.805         18.483         22.066         26.477         32.333          43.447   
      4       1       1         8.134         8.5446         8.9747         9.3891         9.8055         10.248         10.742         11.338         12.087         12.819         13.583         14.752         16.089          18.84         22.478         26.941         32.854          44.099   </code></pre>
<div class="par">
<div class="flushleft">
<p>Graph Mean Values:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(value(EM,J)), a=age, z=kids+marry&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(value(EM,J))&#39;};
ff_graph_grid((tb_az_v{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_12.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_13.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Savings Choices:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(APRIME(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(APRIME(EK,J))&#39;};
ff_graph_grid((tb_az_ap{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_14.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_15.png" width="500" /></p>
</div>
<div class="par">
<div class="flushleft">
<p>Graph Mean Consumption:</p>
</div>
</div>
<pre><code>mp_support_graph(&#39;cl_st_graph_title&#39;) = {&#39;MEAN(C(EK,J)), a=x, z=color&#39;};
mp_support_graph(&#39;cl_st_ytitle&#39;) = {&#39;MEAN(C(EK,J))&#39;};
ff_graph_grid((tb_az_c{1:end, 4:end}), ar_row_grid, age_grid, mp_support_graph);</code></pre>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_16.png" width="500" /></p>
</div>
<div class="center">
<p><img src="img/snwx_vfi_test_bisec_vec_spousalshock_images/figure_17.png" width="500" /></p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="solving-the-dynamic-life-cycle-problem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="solution-with-unemployment.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["NSW-Dynamic-Life-Cycle-and-Stimulus-Checks-Code-Companion.pdf", "PDF"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
